= Bathymetric Surface Product Specification
:series: S
:docnumber: 102
:doctype: standard
:edition: 3.1.0
:language: en
:published-date: 2025-07
:copyright-year: 2025
:committee: hssc
:workgroup: tsmad
:toclevels: 3
:mn-document-class: iho
:mn-output-extensions: xml,html,doc,pdf,rxl
:local-cache-only:
:imagesdir: images
:status: draft-development


[.preface]
== Document History

Changes to this Specification are coordinated by the IHO S-100 Working Group. New editions will be made available via the IHO web site. Maintenance of the Specification shall conform to IHO Resolution 2/2007 (as amended).

[%unnumbered]
[[tab-document-history]]
.Document History
[cols="a,a,a,a",options="headers"]
|===
|Version Number |Date |Approved By |Purpose

|1.0.0
|April 2012
|TSMAD
|Approved edition of S-102

|2.0.0
|March 2017
|S-102PT
|Updated clause 4.0 and 12.0. +
Populated clause 9.0 and Annex B.

|2.0.0
|May 2017
|S-102PT
|Modified clause 9.0 based on feedback at S-100WG2 meeting.

|2.0.0
|February 2018
|S-102PT
|Modified Clause 9.0. Deleted contents of Annex B in preparation for updated S-100 Part 10C guidance. Added Annex F: S-102 Dataset Size and Production, Annex G: Gridding Example, Annex H: Statement added for Multi-Resolution Gridding, Annex I: Statement for future S-102 Tiling.

|2.0.0
|June 2018
|S-102PT
|Modifications to align with S-100 v4.0.0, S-100 Part 10c development, and actions from 4^th^ April S-102 Project Team Meeting.

Modified content throughout the following sections:

* Clause 1, 3, 4, 5, 6, 9, 10, 11, and 12.
* Annexes A, B, D, F, G, and I.

|2.0.0
|October/November 2018
|S-102PT
|Entered Redline comments from HSSC Letter 02/2018

Modified content includes:

* Clause 1, 3, 4, 5, 6, 9, 10, 11, and 12.
* Annexes A, B, D, F, G, and I.

|2.0.0
|January/February 2019
|S-102PT
|Adjudicated HSSC and S102PT Comments at 5^th^ S-102 Project Team Meeting.

Modified content includes:

* Clause 1, 3, 4, 5, 6, 9, 10, 11, and 12.
* Annexes A, B, D, F, G, and I.

|2.0.0
|September/October 2019
|S-102PT
|Adjudicated HSSC and S102PT comments since last release

Modified content includes:

* Annex A, B.
* Clause 4, 10, 12.

|2.1.0
|November 2020
|S-102PT
|Redline first draft of 2.1 including: +
S-102PT6-07.1_CHS-Paper to limit the mandate of the S-102 standard for navigation only -- remove track changes and tiling options. +
S-102PT6_2020_05.c_Data Product Format_Prepared by CARIS-v3.pdf -- adjusted with comments from 7Cs and BSH. +
Removed Annex B sample HDF encoding dump as it was inconsistent.

|2.1.0
|March 2021
|S-102PT
|Redline final draft of 2.1 including: +
S-102PT7 agreed in principle to limit the scope of S-102 v 2.1 to Navigation Only. Several sections adjusted in view of this decision. +
[[lhh1-start1]]S-102PT7 revised storage locations for minimum/maximum depth and associated uncertainty. +
S-102PT7 agreed for metadata to be stored in a separate ISO-formatted file.[[lhh1-end1]] +
Revised several internal references.

|2.1.0
|May 2022
|S-102PT
|Edited filename for exchange catalogue to be CATALOG.XML in 11.3 and in Table 12-7.

|2.2.0
|April 2023
|S-102PT
|Major changes: +
* Changed coverage spatial type from _regular grid_ (DCF 2) to _feature oriented regular grid_ (DCF 9) and +
added _QualityOfSurvey_ feature for providing quality and source metadata for individual grid cells. +
Elements affected: Clause 10 and (new) Clause 7.1. +
* Updated exchange set structure, exchange catalogue, and discovery metadata to align with <<iho-s100,part=17>> +
* Updated dataset structure specification and embedded metadata attributes to align with updated <<iho-s100,part=10c>> +
Element affected: Clause 10 +
* Removed product-specific metadata classes and attributes, and defined replacements in embedded or distributed metadata +
(i.e., as HDF5 attributes or in the new _QualityOfSurvey_ array) +
* Removed provisions for including ISO metadata in S-102 exchange sets +
 +
Other revisions and clarifications: +
* Updated UML and other diagrams to align with aforementioned changes +
* Revised text variously for accuracy and clarity +
* Removed Annex for Feature Catalogue and changed all its references to the IHO Geospatial Information registry +
* Moved gridding method information from Annex into Clause 10 +
* Updated references to more recent versions


|3.0.0
|July 2024
|S-102PT
|Major changes: +
* Modified text and figures to reflect a cell area-based approach to representation. (Clause 4) +
* Added support for multiple vertical datums in a single product (Clause 10) +
* Modified to refer to new _QualityOfBathymetryCoverage_ vice _QualityOfSurvey_. (Clause 10) +
 +
Other revisions and clarifications: +
* Removed annexes on Normative Implementation Guidance, Portrayal Catalogue, Dataset Size, Multi-Resolution Gridding, and Gridding Source Bathymetry. (Annexes) +
* Removed gridding method from product specification entirely. (Clause 10) +
* Revised throughout document to ensure alignment with S-100 Ed. 5.2.0. +
* Revised text variously for accuracy and clarity. +
* Update UML and other diagrams to align with aforementioned changes.
|===

:sectnums:
[[sec-overview]]
== Overview
With the advent of electronic navigation and the technological progress of surveying systems and production capabilities, the ability to enhance maritime navigation with the portrayal of high-resolution bathymetry has become a requirement. The provision and utilization of such data in a standardized format is essential to support the safe and precise navigation of marine vessels, and furthermore an important basis for many other maritime applications.

=== Scope
This document describes an S-100 compliant product specification for a bathymetric surface product. Incorporating aspects of the navigation surface concept <<NavigationSurface,[Smith et al, 2002]>>, an {series}-{docnumber} bathymetric surface product is a digital elevation model which represents the seafloor in a regular grid structure. It can be used alone or as an important element/source for future S-100 conformant ECDIS navigation. The product specification is based on the IHO S-100 framework specification and the ISO 19100 series of standards. It comprises the content model (spatial structure and metadata), encoding structure, portrayal and exchange file format for a bathymetric surface product.

[bibliography]
=== References
* [[[iho-s100,IHO S-100 5.2.0]]]

* [[[iho-s44,IHO S-44]]]

* [[[iho-s4,IHO S-4]]]

* [[[iho-s32,IHO S-32]]]

* [[[iso-8601,ISO 8601:2004]]]

* [[[iso-639-2,ISO 639-2:1998]]]

* [[[iso-19103,ISO 19103:2015]]]

* [[[iso-19111,ISO 19111:2007]]]

* [[[iso-19115-1,ISO 19115-1:2014/Amd 1:2018]]]

* [[[iso-19115-2,ISO 19115-2:2009]]]

* [[[iso-19115-3,ISO/TS 19115-3:2016]]]

* [[[iso-19123,ISO 19123:2005]]]

* [[[iso-19129,ISO/TS 19129:2009]]]

* [[[iso-19131,ISO 19131:2007/Amd 1:2011]]]

* [[[iso-iec-19501,ISO/IEC 19501:2005]]]

* [[[iso3166,ISO 3166-2:2013]]]

* [[[iso-ts-19130,ISO/TS 19130:2010]]]

* [[[iso-ts-19130-2,ISO/TS 19130-2:2014]]]

* [[[iso-19139-1,ISO/TS 19139-1:2019]]]

* [[[iso-10646-1,ISO/IEC 10646-1:2000]]]

* [[[NavigationSurface,The Navigation Surface]]],
span:surname[Smith], span:givenname[Shep M. LT];
span:surname[Alexander], span:givenname[Lee]; and
span:surname[Armstrong], span:givenname[Andy],
"span:title[_The Navigation Surface: A New Database Approach to Creating Multiple Products from High-Density Surveys_]" (span:date[2002]).
span:publisher[International Hydrographic Review].
span:uri[http://scholars.unh.edu/ccom/976]

* [[[OpenNavigation,The Open Navigation Surface Project]]],
span:surname[Calder], span:givenname[Brian];
span:surname[Byrne], span:givenname[Shannon];
span:surname[Brennan], span:givenname[Richard T.];
span:surname[Case], span:givenname[James D.];
span:surname[Fabre], span:givenname[David];
span:surname[Gallagher], span:givenname[Barry];
span:surname[Ladner], span:givenname[Wade R.];
span:surname[Moggert], span:givenname[Friedhelm]; and
span:surname[Patron], span:givenname[Mark],
"span:title[_The Open Navigation Surface Project_]" (span:date[2005]).
span:publisher[International Hydrographic Review].
span:uri[https://scholars.unh.edu/ccom/1011]

=== Terms, definitions and abbreviations

==== Use of language

Within this document:

* "`Must`" indicates a mandatory requirement.
* "`Should`" indicates an optional requirement, that is the recommended process to be followed, but is not mandatory.
* "`May`" means "`allowed to`" or "`could possibly`" and is not mandatory.


==== Terms and definitions

===== Accuracy

Closeness of agreement between a test result and the accepted reference values.

NOTE: A test result can be from an observation or measurement.

===== Coordinate

One of a sequence of _n_ numbers designating the position of a point in N-dimensional space.

NOTE: The numbers must be qualified by units and CRS.

===== Coordinate Reference System

*Coordinate* system which is related to the real world by a datum.

===== Coverage

*Feature* that acts as a function to return values from its range for any direct position within its spatial, temporal, or *spatiotemporal domain*.

NOTE: In other words, a coverage is a feature that has multiple values for each attribute type, where each direct position within the geometric representation of the feature has a single value for each attribute type.

[example]
Examples include a digital image, polygon overlay, or digital elevation matrix

===== Coverage Geometry

Configuration of the *domain* of a *coverage* described in terms of *coordinates*.

===== Direct Position

Position described by a single set of *coordinates* within a *coordinate reference system*.

===== Domain

Well-defined set.

NOTE: Domains are used to define the domain set and range set of attributes, operators, and functions.

===== Depth

The vertical distance from a given water level to the bottom. In this standard, depth refers to the S-32 definition of "Depth Charted".

NOTE: The numbers must be qualified by units and datum.

===== Feature

Abstraction of real-world phenomena.

NOTE: A feature may occur as a type or an instance. Feature type or feature instance should be used when only one is meant.

===== Feature Attribute

Characteristic of a *feature*.

NOTE: A feature attribute type has a name, a data type, and a domain associated to it. A feature attribute instance has an attribute value taken from the value domain of the feature attribute type.

===== Function

Rule that associates each element from a *domain* (source, or domain of the function) to a unique element in another domain (target, co-domain, or *range*).

NOTE: The range is defined by another domain.

===== Geometric Object

Spatial object representing a set of *direct positions*.

NOTE: A geometric object consists of a geometric primitive, a collection of geometric primitives, or a geometric complex treated as a single entity. A geometric object may be the spatial characteristics of an object such as a feature or a significant part of a feature.

===== Grid

Network composed of two or more sets of curves in which the members of each set intersect the members of the other sets in a systematic way.

NOTE: The curves partition a space into grid cells.

===== Grid Point

Point located at the intersection of two or more curves in a *grid*.

===== Lidar

An optical remote sensing technique that uses a laser pulse to determine distance.

NOTE: Lidar may be used to determine depth in shallow water areas.

===== Navigation Surface

A *coverage* representing the bathymetry and associated uncertainty with the methods by which those objects can be manipulated, combined, and used for a number of tasks, certified for safety of navigation.

===== Range <coverage>

Set of values associated by a *function* with the elements of the *spatiotemporal domain* of a *coverage*.

===== Record

Finite, named collection of related items (objects or values).

NOTE: Logically, a record is a set of pairs <name, item >.

===== Rectified Grid

*Grid* for which there is a linear relationship between the *grid coordinates* and the *coordinates* of an external *coordinate reference system*.

NOTE: If the coordinate reference system is related to the earth by a datum, the grid is a georectified grid.

===== Referenceable Grid

*Grid* associated with a transformation that can be used to convert *grid coordinate* values to values of coordinates referenced to an *external coordinate reference system*.

===== Sonar

A technique that uses sound propagation through water to determine distance, primarily *depth* measurement.

===== Spatiotemporal Domain <coverage>

*Domain* composed of *geometric objects* described in terms of spatial and/or temporal *coordinates*.

NOTE: The spatiotemporal domain of a continuous coverage consists of a set of direct positions defined in relation to a collection of geometric objects.

===== Surface

Connected 2-dimensional geometric primitive, representing the continuous image of a region of a plane.

NOTE: The boundary of a surface is the set of oriented, closed curves that delineate the limits of the surface.

===== Uncertainty

The interval (about a given value) that will contain the true value of the measurement at a specific confidence level.

NOTE: Errors exist and are the differences between the measured value and the true value. Since the true value is never known it follows that the error itself cannot be known. Uncertainty is a statistical assessment of the likely magnitude of this error. The numbers must be qualified by units.

[[itd]]In this document an {series}-{docnumber} uncertainty is always considered to be 1-dimensional and at the 2-sigma or 95% confidence level.[[conlev]]

===== Vector

Quantity having direction as well as magnitude.

NOTE: A directed line segment represents a vector if the length and direction of the line segment are equal to the magnitude and direction of the vector. The term vector data refers to data that represents the spatial configuration of features as a set of directed line segments.


==== Abbreviations
This Product Specification adopts the following convention for presentation purposes:

CRS:: Coordinate Reference System
DCEG:: Data Classification and Encoding Guide
ECDIS:: Electronic Chart Display Information System
ENC:: Electronic Navigational Chart
EPSG:: European Petroleum Survey Group
HDF:: Hierarchical Data Format
HSSC:: IHO Hydrographic Services and Standards Committee (formerly CHRIS)
IEC:: International Electrotechnical Commission
IHO:: International Hydrographic Organization
IMO:: International Maritime Organization
IOGP:: International association of Oil and Gas Producers (formerly OGP)
ISO:: International Organization for Standardization
MRN:: Maritime Resource Name
S-100 WG:: S-100 Working Group
{series}-{docnumber} PT:: {series}-{docnumber} Project Team
TS:: Technical Specification
TSMAD:: Transfer Standard Maintenance and Application Development Working Group
UML:: Universal Modelling Language
URI:: Uniform Resource Identifier
XML:: eXtensible Markup Language

=== General {series}-{docnumber} data product description

*Title*:: Bathymetric Surface Product Specification

*Abstract*:: This document is a Product Specification for a bathymetric surface which may be used alone or as an important element/source for future S-100 conformant ECDIS navigation. The product is defined as a data set with different coverages. This Product Specification includes a content model and separate encodings.

*Acronym*:: {series}-{docnumber}

*Content*:: The Product Specification defines all requirements to which {series}-{docnumber} bathymetric data products must conform. Specifically, it defines the data product content in terms of features and attributes within the feature catalogue. The display of features is defined by the symbols and rule sets contained in the portrayal catalogue. The DCEG provides guidance on how data product content must be captured. <<annex-data-classification-and-encoding-guide>>, in addition to [[acstart]]<<tsf>>[[acend]], will provide implementation guidance for developers.

*Spatial Extent*::
*Description*: Areas specific to marine navigation. +
*East Bounding Longitude*: 180째 +
*West Bounding Longitude*: -180째 +
*North Bounding Latitude*: 90째 +
*South Bounding Latitude*: -90째

*Purpose*:: The primary purpose of the Bathymetric Surface Product is to provide high-resolution bathymetry in gridded form in support of safety of navigation. A Bathymetric Surface Product may exist anywhere in the maritime domain. There are no limitations to its extent. Portrayal of {series}-{docnumber} bathymetry with other S-100 compliant products are intended to support safe passage, precise berthing and mooring, as well as route planning of marine vessels.


=== Product Specification metadata
This information uniquely identifies this Product Specification and provides information about its creation and maintenance. For further information on dataset metadata, see <<sec-metadata>>.

*Title*:: Bathymetric Surface Product Specification
*S-100 Version*:: 5.2.0
*{series}-{docnumber} Version*:: {edition}
*Date*:: July 2025

*Language*:: English
*Classification*:: Unclassified
*Contact*::
+
--
International Hydrographic Bureau +
4 Quai Antoine 1er +
B.P. 445 +
MC 98011 MONACO CEDEX +
Telephone: +377 93 10 81 00 +
Fax: +377 93 10 81 40 +
Email: mailto:++info@iho.int++[] +
--
*URL*:: link:++http://www.iho.int/++[www.iho.int]
*Identifier*:: {series}-{docnumber}
*Maintenance*:: Changes to the Product Specification {series}-{docnumber} are coordinated by the IHO S-100 Working Group (S-100 WG), and must be made available via the IHO web site. Maintenance of the Product Specification must conform to IHO Resolution 2/2007, as amended.


=== IHO Product Specification Maintenance

==== Introduction
Changes to {series}-{docnumber} will be released by the IHO as a New Edition, revision, or clarification.

==== New Edition
_New Editions_ of {series}-{docnumber} introduce significant changes. _New Editions_ enable new concepts, such as the ability to support new functions or applications, or the introduction of new constructs or data types. _New Editions_ are likely to have a significant impact on either existing users or future users of {series}-{docnumber}. All cumulative _revisions_ and _clarifications_ must be included with the release of approved New Editions.

==== Revision
_Revisions_ are defined as substantive semantic changes to {series}-{docnumber}. Typically, _revisions_ will change {series}-{docnumber} to correct factual errors; introduce necessary changes that have become evident as a result of practical experience or changing circumstances. A _revision_ must not be classified as a clarification. Revisions could have an impact on either existing users or future users of {series}-{docnumber}. All cumulative _clarifications_ must be included with the release of approved _revisions_.

Changes in a revision are minor and ensure backward compatibility with the previous versions within the same Edition. Newer revisions, for example, introduce new features and attributes. Within the same Edition, a dataset of one version could always be processed with a later version of the Feature and Portrayal Catalogues.

In most cases a new feature or portrayal catalogue will result in a _revision_ of {series}-{docnumber}.

==== Clarification
_Clarifications_ are non-substantive changes to {series}-{docnumber}. Typically, _clarifications_: remove ambiguity; correct grammatical and spelling errors; amend or update cross references; insert improved graphics in spelling, punctuation and grammar. A _clarification_ must not cause any substantive semantic change to {series}-{docnumber}.

Changes in a _clarification_ are minor and ensure backward compatibility with the previous versions within the same Edition. Within the same Edition, a dataset of one clarification version could always be processed with a later version of the Feature and Portrayal Catalogues, and a Portrayal Catalogue can always rely on earlier versions of the Feature Catalogue.


==== Version Numbers
The associated version control numbering to identify changes (n) to {series}-{docnumber} must be as follows:

New Editions denoted as **n**.0.0

Revisions denoted as n.**n**.0

Clarifications denoted as n.n.**n**

[[sec-specification-scope]]
== Specification Scope
This product specification defines only one general scope which applies to all its sections.

*Scope Identification*:: GeneralScope


[[sec-data-product-identification]]
== Data Product Identification

*Title*:: Bathymetric Surface

*Alternate Title*:: Gridded Bathymetry

*Abstract*:: The Bathymetric Surface Product consists of a set of values organized to form a regular grid coverage, with associated metadata, for an area of the sea, river, lake, or other body of water. The final grid coverage includes a depth value and optional associated uncertainty estimate for each cell in the grid.

*Topic Category*::
+
--
Main topics for the product, as according to <<iso-19115-1>> MD_TopicCategoryCode:

006 -- elevation

014 -- oceans

012 -- inlandWaters
--

*Geographic Description*:: Areas specific to marine navigation.

*Spatial Resolution*:: The spatial resolution, or the spatial dimension on the earth covered by the size of a grid matrix cell (nominal ground sample distance), varies according to the model adopted by the producing hydrographic office.

*Purpose*:: The primary purpose of the bathymetric surface product is to provide high-resolution bathymetry in gridded form in support of safety of navigation.

*Language*:: English (Mandatory), other (Optional)

*Classification*::
+
--
[[classtart]]Data can be classified as one of the following:[[classend]]

. Unclassified;
. Restricted;
. Confidential;
. Secret;
. Top Secret;
. Sensitive but unclassified;
. For official use only;
. Protected;
. Limited distribution
--

*Spatial Representation Type*:: Type of spatial representation for the product, as defined by the <<iso-19115-1>> MD_SpatialRepresentationTypeCode: 002 - grid.

*Point of Contact*:: Producing Agency


[[sec-data-content-and-structure]]
== Data Content and Structure

=== Introduction
The Bathymetric Surface Product incorporates aspects of the Navigation Surface concept where in addition to estimation of depth, an optional estimate of the uncertainty associated with the depth can be computed and preserved. <<fig-overview-structure-s102>> below shows a high-level overview of the structure of S-102. It shows that the Bathymetric Surface Product consists of a set of data comprising the HDF5 datasets plus a Digital Certification Block. The Digital Certification Block is mandatory so that the user can trace whether the data has been certified. The HDF5 file consists of metadata (spatial, feature and discovery) and collocated coverages consisting of depth values, uncertainty values, and references to metadata records. S-102 uses the S-100 Data Protection Scheme to ensure certification and authentication.

[[fig-overview-structure-s102]]
.Overview Structure of S-102
image::../images/figure-overview-structure-s102.png["Within a larger block: Version Tag, Metadata Block, Bathymetry Coverage, and Quality of Bathymetry Coverage blocks. As a separate block: Digital Certification Block.",450,525]

Thus, the Bathymetric Surface Product is a hybrid of coverages, as defined in <<iho-s100,part=8>>, and metadata packages as defined in <<iho-s100,part=4>>. This is described in <<subsec-application-schema>>.

[[subsec-application-schema]]
=== Application Schema
The Application Schema Data Set Structure is shown in <<fig-data-set-structure-s102>> and <<fig-coverage-structure-of-s102>>. They show a number of classes specialized for use in S-102 and six sets of implementation classes. An actual data set of S-102 bathymetry data contains only the implementation classes. All of the required attributes from the other classes in the application schema are satisfied by statements within the Product Specification. This approach to producing the Application Schema results in a very simple structure for implementation.

[[fig-data-set-structure-s102]]
.Data Set Structure of S-102
image::../images/figure-data-set-structure-s102.png[UML diagram depicting the Application Schema Data Set Structure as described between this figure and the Coverage Structure figure]


The model in <<fig-data-set-structure-s102>> states that:

* An S-102 data set (*S102_DataSet*), which is inherited from *S100_DataSet*, references an S-102 Image and Gridded Data Collection (*S102_IGCollection*). In S-100 it is possible to have multiple collections but in S-102 only one is needed to hold the bathymetry coverage. The S-102 discovery metadata class (*S102_DiscoveryMetadata*) describes the metadata entities required for the identification of the entire data set. The required discovery metadata is implemented through the *S100_DatasetDiscoveryMetadata* class defined in <<iho-s100,part=17>>.

* An instance of an S-102 Image and Gridded Data Collection (*S102_IGCollection*) which is a subtype of *S100_IGCollection*, is described by a set of S-102 Collection Metadata (*S102_CollectionMetadata*). This relationship is 1 to 1 meaning that there is one set of collection metadata for each instance of *S102_IGCollection*. There is a large choice of metadata that may be used in an S-100 compliant data product. Only a small amount of this metadata is mandated by <<iso-19115-1>> for discovery. This edition of S-102 neither uses ISO metadata files nor extends S-100 generic metadata and therefore *S102_CollectionMetadata*, *S102_StructuralMetadata*, *S102_QualityMetadata*, and *S102_AcquisitionMetadata* are abstract classes as described in <<iho-s100,part=8,clause=8.5.3>>. This edition of S-102 uses the dataset metadata elements defined in <<iho-s100,part=17>> and <<iho-s100,part=10c>> with restrictions defined in this product specification. The metadata elements defined in <<iho-s100,part=17>> are encoded in a discovery block within the exchange catalogue (<<iho-s100,part=17,clause=17.4.4>> to <<iho-s100,part=17,clause=17.4.5>>), and the metadata elements defined in <<iho-s100,part=10c>> are encoded as attributes and datasets within the HDF5 file (<<iho-s100,part=10c,clause=10c.9.2>>). The conceptual structure of coverage features in an S-102 dataset is discussed further in <<subsec-application-schema-implementation-classes>>.

[[fig-coverage-structure-of-s102]]
.Coverage Structure of S-102
image::../images/figure-coverage-structure-of-s102.png[UML diagram depicting the Application Schema Coverage Structure as described between this figure and Application Schema implementation classes]

The model in <<fig-coverage-structure-of-s102>> depicts the coverage type in this application schema:

* The coverage type for *BathymetryCoverage* is a continuous Regular Grid Coverage called *S102_DepthCoverage* which inherits from *S100_IF_GridCoverage*. Many of the parameters of the coverage are described in the Product Specification.

* The coverage type for *QualityOfBathymetryCoverage* is a continuous Regular Grid Coverage called *S102_QualityCoverage* which inherits from *S100_IF_GridCoverage*. Many of the parameters of the coverage are described in the Product Specification.

[[subsec-application-schema-implementation-classes]]
==== Application Schema implementation classes
The implementation classes for the template application schema are shown in <<fig-implementation-of-classes>>. The attributes are shown for the coverage related classes together with the attribute classes.

In order to simplify the implementation, a number of defaults are assumed for S-102. These defaults simplify implementation and help simplify interaction with the Navigation Surface implementation from the Open Navigation Surface Working Group and other bathymetric gridded types. In the following sub clauses, the default values are emphasized so that they do not need to be encoded when generating an encoding of the implementation classes. However, if specified they must assume the stated values unless other options are stated.


[[fig-implementation-of-classes]]
.Implementation of Classes of S-102
image::../images/figure-implementation-of-classes.png[UML diagram depicting the implementation classes for the template application schema as described between this figure and Feature Catalogue]


===== Implementation classes description

[level=6]
===== BathymetryCoverage

[level=7]
===== BathymetryCoverage semantics

The class *BathymetryCoverage* has the attributes _minimumDepth_, _maximumDepth_, _minimumUncertainty_, and _maximumUncertainty_ which bound the depth attribute and the uncertainty attribute from the *S102_BathymetryValues* record. *BathymetryCoverage* additionally contains the inherited attributes _origin_, _offsetVectors_, _dimension_, _axisName_, _extent_, _sequenceRule_, and _startSequence_ from *S100_IF_Grid* and *CV_Grid*.

The origin is a position in a specified coordinate reference system, and a set of offset vectors specify the direction and distance between the grid lines. It also contains the additional geometric characteristics of a rectified grid.

[level=7]
===== minimumDepth

The attribute _minimumDepth_ has the value type _Real_ and describes the lower bound of the depth estimate for all the _depth_ values in *S102_BathymetryValues* record. This attribute is required. There is no default.

[level=7]
===== maximumDepth

The attribute _maximumDepth_ has the value type _Real_ and describes the upper bound of the depth estimate for all the _depth_ values in *S102_BathymetryValues* record. This attribute is required. There is no default.

[level=7]
===== minimumUncertainty

The attribute _minimumUncertainty_ has the value type _Real_ and describes the lower bound of the uncertainty of the depth estimate for all the _depth_ values in *S102_BathymetryValues* record. If all uncertainty values are populated with the fill value (i.e., if no actual uncertainties exist in the data), this attribute shall be populated with the fill value. This attribute is required. There is no default.

[level=7]
===== maximumUncertainty

The attribute _maximumUncertainty_ has the value type _Real_ and describes the upper bound of the uncertainty of the depth estimate for all the _depth_ values in *S102_BathymetryValues* record. If all uncertainty values are populated with the fill value (i.e., if no actual uncertainties exist in the data), this attribute shall be populated with the fill value. This attribute is required. There is no default.

[level=7]
===== origin

The attribute _origin_ has the value class _DirectPosition_ which is a position that shall locate the origin of the rectified grid in the coordinate reference system. This attribute is required. There is no default. In the encoding this is split into properties gridOriginLatitude and gridOriginLongitude.

[level=7]
===== offsetVectors

The attribute _offsetVectors_ has the value class _Sequence<Vector>_ that shall be a sequence of offset vector elements that determine the grid spacing in each direction. The data type Vector is specified in <<iso-19103>>. This attribute is required. There is no default. The HDF5 encoding implements and simplifies _offsetVectors_ in the form of two HDF5 attributes: gridSpacingLatitudinal and gridSpacingLongitudinal.

[level=7]
===== dimension

The attribute _dimension_ has the value class Integer that shall identify the dimensionality of the grid. The value of the grid dimension in this product specification is 2. This value is [underline]#fixed# in this Product Specification.

[level=7]
===== axisNames

The attribute _axisNames_ has the value class _Sequence<CharacterString>_ that shall be used to assign names to the grid axis. The grid axis names shall conform to those of the CRS. For the allowable CRS according to this specification, the axis names shall be "Latitude" and "Longitude" for unprojected data sets or "`Northing`" and "`Easting`" in a projected space.

[level=7]
===== extent

The attribute _extent_ has the value class *CV_GridEnvelope* that shall contain the extent of the spatial domain of the coverage. It uses the value class *CV_GridEnvelope* which provides the grid coordinate values for the diametrically opposed corners of the grid. The [underline]#default is that this value is derived# from the bounding box for the data set. The extent of the dataset limits is defined as a rectangle coincident with the outermost cell boundaries of the dataset. In the encoding the property BoundingBox is used to hold the extent.

[level=7]
===== sequencingRule

The attribute _sequencingRule_ has the value class *CV_SequenceType* that shall describe how the grid points are ordered for association to the elements of the sequence values. The [underline]#default value is "linear". No other options are allowed.#

[level=7]
===== startSequence

The attribute _startSequence_ has the value class *CV_GridCoordinate* that shall identify the grid point to be associated with the first record in the values sequence. The [underline]#default value is the lower left corner# of the grid. No other options are allowed.


[level=6]
===== S102_BathymetryValues

[level=7]
===== S102_BathymetryValues semantics

The class *S102_BathymetryValues* is related to *BathymetryCoverage* by a composition relationship in which an ordered sequence of _depth_ values provide data values for each grid cell. The class *S102_BathymetryValues* inherits from S100_IF_Grid.

[level=7]
===== values

The attribute _values_ has the value type *_S102_BathymetryValueRecord_*, which is a sequence of value items that shall assign values to the grid points. There are two attributes in the bathymetry value record in the *S102_BathymetryValues* class:

* _depth_

* (optional) _uncertainty_

[level=6]
===== QualityOfBathymetryCoverage

[level=7]
===== QualityOfBathymetryCoverage semantics

The class *QualityOfBathymetryCoverage* contains the inherited attributes _origin_, _offsetVectors_, _dimension_, _axisName_, _extent_, _sequenceRule_, and _startSequence_ from *S100_IF_Grid* and *CV_Grid*.

The origin is a position in a specified coordinate reference system, and a set of offset vectors specify the direction and distance between the grid lines. It also contains the additional geometric characteristics of a rectified grid.

[level=7]
===== origin

The attribute _origin_ has the value class _DirectPosition_ which is a position that shall locate the origin of the rectified grid in the coordinate reference system. This attribute is required. There is no default. In the encoding this is split into properties gridOriginLatitude and gridOriginLongitude.

[level=7]
===== offsetVectors

The attribute _offsetVectors_ has the value class _Sequence<Vector>_ that shall be a sequence of offset vector elements that determine the grid spacing in each direction. The data type Vector is specified in <<iso-19103>>. This attribute is required. There is no default. The HDF5 encoding implements and simplifies _offsetVectors_ in the form of two HDF5 attributes: gridSpacingLatitudinal and gridSpacingLongitudinal.

[level=7]
===== dimension

The attribute _dimension_ has the value class Integer that shall identify the dimensionality of the grid. The value of the grid dimension in this product specification is 2. This value is [underline]#fixed# in this Product Specification and does not need to be encoded.

[level=7]
===== axisNames

The attribute _axisNames_ has the value class _Sequence<CharacterString>_ that shall be used to assign names to the grid axis. The grid axis names shall conform to those of the CRS. For the allowable CRS according to this specification, the axis names shall be "Latitude" and "Longitude" for unprojected data sets or "`Northing`" and "`Easting`" in a projected space.

[level=7]
===== extent

The attribute _extent_ has the value class *CV_GridEnvelope* that shall contain the extent of the spatial domain of the coverage. It uses the value class *CV_GridEnvelope* which provides the grid coordinate values for the diametrically opposed corners of the grid. The [underline]#default is that this value is derived# from the bounding box for the data set. The extent of the dataset limits is defined as a rectangle coincident with the outermost cell boundaries of the dataset. In the encoding the property BoundingBox is used to hold the extent.

[level=7]
===== sequencingRule

The attribute _sequencingRule_ has the value class *CV_SequenceType* that shall describe how the grid points are ordered for association to the elements of the sequence values. The [underline]#default value is "linear". No other options are allowed.#

[level=7]
===== startSequence

The attribute _startSequence_ has the value class *CV_GridCoordinate* that shall identify the grid point to be associated with the first record in the values sequence. The [underline]#default value is the lower left corner# of the grid. No other options are allowed.

[level=6]
===== S102_QualityValues

[level=7]
===== S102_QualityValues semantics

The class *S102_QualityValues* is related to *QualityOfBathymetryCoverage* by a composition relationship in which an ordered sequence of _id_ values provide for each cell references to metadata. The class *S102_QualityValues* inherits from S100_IF_Grid.

[level=7]
===== values

The attribute _values_ has the value type *_S102_QualityValueRecord_* which is a sequence of value items that shall assign values to the grid points. There is one attribute in the quality value record, _id_, in the *S102_QualityValues* class.


[level=6]
===== DirectPosition

[level=7]
===== DirectPosition semantics

The class DirectPosition hold the coordinates for a position within some coordinate reference system.

[level=7]
===== coordinate

The attribute _coordinate_ is a sequence of Numbers that hold the coordinate of this position in the specified reference system.

[level=7]
===== dimension

The attribute _dimension_ is a derived attribute that describes the number of coordinate axes.

[level=6]
===== CV_GridEnvelope

[level=7]
===== CV_GridEnvelope semantics

The class *CV_GridEnvelope* provides the grid coordinate values for the diametrically opposed corners of an envelope that bounds a grid. It has two attributes.

[level=7]
===== low

The attribute _low_ shall be the minimum coordinate values for each coordinate axis among all grid cells within the envelope. For this specification the value is the southwesternmost grid point coordinate minus half of the grid spacing for each coordinate axis.

[level=7]
===== high

The attribute _high_ shall be the maximum coordinate values for each coordinate axis among all grid cells within the envelope. For this specification the value is the northeasternmost grid point coordinate plus half of the grid spacing for each coordinate axis.

[level=6]
===== CV_GridCoordinate

[level=7]
===== CV_GridCoordinate semantics

The class *CV_GridCoordinate* is a data type for holding the grid coordinates of a *CV_GridPoint*.

[level=7]
===== coordValues

The attribute _coordValues_ has the value class _Sequence<Integer>_ that shall hold one integer value for each dimension of the grid. The ordering of these coordinate values shall be the same as that of the elements of _axisNames_. The value of a single coordinate shall be the number of offsets from the origin of the grid in the direction of a specific axis.

[level=6]
===== CV_SequenceRule

[level=7]
===== CV_SequenceRule semantics

The class *CV_SequenceRule* contains information for mapping grid coordinates to a position within the sequence of records of feature attribute values. It has two attributes.

[level=7]
===== type

The attribute _type_ shall identify the type of sequencing method that shall be used. A code list of scan types is provided in <<iho-s100,part=10c>>. Only the value "linear" shall be used in S-102, which describes scanning row by row by column.

[level=7]
[[scanDirection]]
===== scanDirection

The attribute _scanDirection_ has the value class _Sequence<CharacterString>_: a list of axis names that indicates the order in which grid points shall be mapped to position within the sequence of records of feature attribute values.


=== Feature Catalogue

==== Introduction
The S-102 Feature Catalogue describes the feature types, attributes and attribute values which may be used in the product.

[[tsf]]The S-102 Feature Catalogue is available in an XML document which conforms to the S-100 XML Feature Catalogue Schema and can be downloaded from the IHO Geospatial Information Registry.[[ihoweb]]

==== Feature types
S-102 is a coverage feature product. *BathymetryCoverage* implements *S102_DepthCoverage* and includes *S102_BathymetryValues*. *QualityOfBathymetryCoverage* implements *S102_QualityCoverage* and includes *S102_QualityValues*.

===== Geographic
Geographic (geo) feature types form the principle content of the dataset and are fully defined by their associated attributes. In S-102, *BathymetryCoverage* has been registered as a geographic feature type.

===== Meta
Meta feature types are allowed in the dataset and are fully defined by their associated attributes. In S-102, *QualityOfBathymetryCoverage* has been registered as a meta feature type.

==== Feature relationship
S-102 does not use any feature relationships.

==== Attributes

===== Simple attributes

In S-102, _depth_ and _uncertainty_ have been registered as simple attributes, type `<real>`; and _iD_ has been registered as a simple attribute, type `<integer>`. Simple attributes are defined in <<iho-s100,part=5,clause=5-4.2.3.3>>.

===== Complex attributes
In S-102 there are currently no complex attributes defined.

=== Dataset types

==== Introduction
Bathymetric Surface datasets are represented as regular grids. The general structure for a regular grid is defined in <<iho-s100,part=8>>. Each sample in a grid represents the value in the grid cell area.

The georeferencing for an S-102 Bathymetric Surface product shall be grid point based, referenced from the southwesternmost grid point. The reference position (grid origin) included in the metadata, precisely the attributes _gridOriginLatitude_ and _gridOriginLongitude_, shall be given in the coordinates used for the grid and shall contain sufficient digits of precision to locate the grid with accuracy no worse than a decimetre on the surface of the ellipsoid of rotation of the chosen horizontal datum.

[[fig-s102-cell-area-and-Bbox]]
.S-102 grid structure. Grid origin is the lower left grid point. Grid cells are centered around grid points. Bounding box is coincident with the outermost grid cell boundaries.
image::../images/figure-s102-cell-area-and-Bbox.png["S-102 grid components"]

==== Regular grid

===== S-102 coverages
The *BathymetryCoverage* contains _depth_ and, optionally, _uncertainty_. The general structure of each is defined in <<iho-s100,part=8>> as a georectified grid. Similarly, the *QualityOfBathymetryCoverage* contains _id_.

The grid properties of origin and spacing are defined by attributes in the *BathymetryCoverage.nn* and *QualityOfBathymetryCoverage.01* Feature Instance Groups. Each grid is a two-dimensional matrix organized in row major order and starting from the southwesternmost grid point. Thus, for each grid, the first sample is the point at the southwest corner of the grid with location specified by the georeferencing parameters, the second is one grid resolution unit to the east of that position and at the same northing or latitude, and the third is two grid resolution units to the east and at the same northing or latitude. For stem:[C] columns in the grid, the stem:[(C+1)]^th^ sample in the grid is located one grid resolution unit to the north but on the same easting or longitude as the first sample in the grid.

[[fig-s102-grid-point-location]]
.S-102 Grid point location
image::../images/figure-s102-grid-node.location.png[A matrix with 5 rows and 6 columns of cells. The overall matrix is labeled _X rows x C columns_. The leftmost element of the second lowest row is highlighted and labeled _C + 1_. The origin is shown at the bottom left and extends rightward.]

For *BathymetryCoverage.nn*, _depth_ and optional _uncertainty_, are stored in the same grid as members of a data compound. The units of the depth values are in metres. The vertical distance is from a given water level to the bottom. Drying heights (drying soundings) are indicated by a negative depth value. For *QualityOfBathymetryCoverage.01*, only _id_ is stored in the grid.

The unknown state for depth is defined to be 1,000,000.0 (1.0e6).

The uncertainty values are expressed as positive quantities at each grid cell. As detailed in <<tab-elements-of-featureAttributeTable-compound-datatype>> and <<tab-codes-defining-how-bathy-depth-uncertainty-determined>> the uncertainty grid supports multiple definitions of vertical uncertainty. A recipient of an S-102 file can refer to the uncertainty definition in the Metadata to gain an understanding of how the uncertainty was computed.

The undetermined state for uncertainty is defined to be 1,000,000.0 (1.0e6).

The _id_ values in *QualityOfBathymetryCoverage.01* are expressed as unsigned 32-bit integer at each grid cell. Each value corresponds to the identifier for a metadata record in a *featureAttributeTable* <<root-QualityOfBathymetryCoverage>>.

The fill value for _id_ is defined to be 0.

===== Extensions
In S-102 there are currently no extensions defined.

=== Multiple datasets
In order to facilitate the efficient processing of S-102 data, the geographic coverage of a given *maximum display Scale* may be split into multiple datasets.

=== Dataset rules
Each S-102 dataset must only have a single extent as it is a coverage feature.

There should be no overlapping data of the same maximum display scale, except at the agreed adjoining limits. Where it is difficult to achieve a perfect join, a buffer to be agreed upon by the producing agencies may be used.

=== Geometry
S-102 regular gridded coverages are an implementation of S100_IF_GridCoverage <<iho-s100,part=8,clause=8.7>>.


[[sec-coordinate-reference-systems-crs]]
== Coordinate Reference Systems (CRS)

=== Introduction

The Coordinate Reference System information contained in <<tab-s102-coordinate-reference-systems-epsg-codes>> is defined in the manner specified in <<iho-s100,part=6>>. The vertical datum is specified separately using other root group attributes.


[[horizontal-crs]]
=== Horizontal Coordinate Reference System

[[tab-s102-coordinate-reference-systems-epsg-codes]]
.S-102 Coordinate Reference Systems (EPSG Codes)
[cols="2"]
|===
h|EPSG Code h|Coordinate Reference System
|4326 |WGS84
|32601 - 32660 |WGS 84 / UTM Zone 1N to Zone 60N
|32701 - 32760 |WGS 84 / UTM Zone 1S to Zone 60S
|5041 |WGS 84 / UPS North (E,N)
|5042 |WGS 84 / UPS South (E,N)
2+|The full reference to EPSG can be found at link:++https://epsg.org/++[\https://epsg.org].
|===


*Horizontal Coordinate Reference System*:: EPSG (see <<tab-s102-coordinate-reference-systems-epsg-codes>>)
*Projection*:: NONE/UTM/UPS
*Temporal reference system*:: Gregorian Calendar
*Coordinate Reference System registry*:: link:++https://epsg.org/++[EPSG Geodetic Parameter Dataset]
*Date type (according to <<iso-19115-1>>)*:: 002 - publication
*Responsible party*:: International Association of Oil & Gas Producers (IOGP)
*URL*:: link:++https://www.iogp.org/++[]


=== Vertical Coordinate Reference System
Although in this product there are no direct vertical coordinates the values of the depth attributes are indirectly such coordinates. Therefore, it is important to specify the vertical CRS to which these values conform. The vertical CRS is an earth gravity-based, one-axis coordinate system. The Orientation of the axis is defined by the vertical coordinate system attribute (_verticalCS_) in the root group (see <<tab-root-group-attributes>>).

The vertical datum must be taken from the code-list specified by the IHO Geospatial Information (GI) Registry for the attribute named _Vertical Datum_. It will be defined in the root group as an HDF5 attribute (see <<tab-root-group-attributes>>).


=== Temporal reference system
The temporal reference system is the Gregorian calendar for date and UTC for time. Time is measured by reference to Calendar dates and Clock time in accordance with <<iso-8601,clause=5.4.4>>. A date-time variable will have the following 16-character format: _yyyymmddThhmmssZ_.


[[sec-data-quality]]
== Data Quality
Data quality allows users and user systems to assess fitness for use of the provided data. Data quality measures and the associated evaluation are reported as metadata of a data product. This metadata improves interoperability with other data products and provides usage by user groups that the data product was not originally intended for. The secondary users can make assessments of the data product usefulness in their application based on the reported data quality measures.

=== Completeness

==== Commission
Commission is applicable for S-102. Data Producers must verify that no excess items have been included in the dataset. Such excess items include duplicate items, which must be removed.

If no excess items are present, the dataset PASSES this test.

==== Omission
Omission is applicable for S-102. Data Producers must verify that no items that should have been included in the dataset have been omitted.

If no necessary items have been omitted, the dataset PASSES this test.

=== Logical consistency

==== Conceptual consistency
Conceptual Consistency is applicable for S-102 and follows the guidelines from <<iho-s100,part=1>>.

Data Producers must verify that the dataset conforms to the S-100 General Feature Model.

If the dataset conforms to the S-100 General Feature Model, the dataset PASSES this test.

==== Domain consistency
Domain consistency is applicable for S-102 and follows the guidelines from <<iho-s100,part=5>>.

Data Producers must verify that the dataset conforms to the S-102 Feature Catalogue and to <<annex-data-classification-and-encoding-guide>>.

If the dataset conforms to the S-102 Feature Catalogue and to <<annex-data-classification-and-encoding-guide>>, the dataset PASSES this test.

==== Format consistency
Format Consistency is applicable for S-102 and follows the guidelines from <<iho-s100,part=10c>>.

Data Producers must verify that the dataset conforms to <<sec-data-product-format-encoding>> of this Product Specification.

If the dataset conforms to <<sec-data-product-format-encoding>>, the dataset PASSES this test.



=== Positional accuracy

==== Gridded data positional accuracy
Gridded positional accuracy is defined by the precision of the positional reference used to specify its location within its spatial projection. These positional references are contained within the spatial metadata of the S-102 grid. It is assumed that any horizontal errors are assimilated into the vertical uncertainty. The vertical values are calculated for each grid point using the processes and procedures used by each hydrographic office during the creation of the S-102 grid. Appropriate selection of both the origin reference point and spatial resolution are important and are another factor in gridded positional accuracy.

==== Relative internal positional accuracy
The internal positional accuracy is defined as the precision of the location of each grid point within the S-102 grid. The position of each grid point within the grid is referenced by a row and column combination. The metadata for S-102 defines a gridded resolution along both the X and Y axis of the grid. This absolute position of a grid point within the spatial projection of the grid is calculated using the row/column and the X/Y resolution. In this case, the accuracy is controlled by the precision used in defining these resolutions.

=== Temporal accuracy

Temporal accuracy, consistency, and validity of bathymetric grids are confined to elements of the vertical control processes. These aspects are addressed during the formulation and application of vertical control processes applied by the various hydrographic offices. Details of these processes will be included in the Lineage portion of the metadata defined in <<sec-metadata>> of this Product Specification.

=== Thematic accuracy

==== Thematic classification correctness
For S-102 bathymetric grids there are two classifications of data values, which are land and water. There are two considerations for assessing classification correctness when using the grid. The first is that values given in the depth layer of the S-102 grid are based on the associated hydrographic office's chosen vertical datum. Should another value in relation to a different vertical datum be required, a series of correctors would need to be applied. Secondly, when considering the data values, the value stored in the uncertainty for a given grid point must be considered. This uncertainty value represents the magnitude of possible deviation in either direction from the data value and must be applied when assessing the classification correctness. The new value generated when applied may cause a change in the classification.

==== Non-quantitative attribute accuracy
Thematic accuracy of S-102 bathymetric data is wholly quantitative.


==== Quantitative attribute accuracy
As defined in <<iho-s100,part=4c>> the data quality for the depth coverage is also defined as a co-located optional coverage, which is the uncertainty. This value particularly refers to the vertical uncertainty at each grid point. The uncertainty coverage supports multiple definitions of vertical uncertainty.

See <<tab-codes-defining-how-bathy-depth-uncertainty-determined>>.



== Data Capture and Classification
The DCEG describes how data describing the real world should be captured using the types defined in the S-102 Feature Catalogue. The DCEG is located at <<annex-data-classification-and-encoding-guide>>.

A number of sounding techniques are used to capture bathymetric data. It is permitted, but not required, to include data acquisition information in the metadata of an S-102 Bathymetric Surface product. The metadata class S102_AcquisitionMetadata has been defined, but the information elements to populate this metadata class should be identified in a national profile of S-102.

[[qualityAndSourceMetadata]]
=== Quality and source metadata

Quality and source metadata in S-102 are intended to enable and support future navigation software to appropriately auto-generate and attribute cartographic features such as custom depth contours and soundings from S-102 products, all while minimally impacting the overall file size of the product.

Quality and source metadata are encoded in a feature attribute table compliant with both HDF5 and S-100. This feature attribute table will provide valuable information about the bathymetry on a grid cellwise basis compared to traditional vector-based metadata files, simplifying the interpretation and implementation by navigation software systems.

The fields of the feature attribute table are defined elsewhere in this Product Specification (<<tab-attributes-of-values-group>>).

Quality and source metadata in S-102 are based on S-101 quality attributes, with significant augmentations and omissions described below. The quality and source metadata support a threefold purpose:

. Support S-101-defined attribution of auto-generated vector depth areas, depth contours, and soundings created directly from the S-102 dataset.

.. The attribute _featureSizeVar_ is meant to augment _featureSize_ which corresponds to S-101 size of features detected. As noted in S-101, size of features detected is intended to be described as the smallest size in cubic metres the survey was capable of detecting. Depending on various survey parameters, this definition might require different depth ranges to have different values. For example, a survey vessel working at a fixed height off the seafloor (such as an autonomous underwater survey vessel) could maintain a fixed feature detection size capability over a wide range of depths. Conversely, a surface vessel working over that same range of depths may have a feature detection capability that varies with depth. The latter situation could foreseeably cause the detection capability to be ambiguous and potentially misrepresented. For this reason, _featureSizeVar_ is defined as the ratio (expressed as a percentage) of minimum detectable feature size to water depth. When both _featureSize_ and _featureSizeVar_ are present, the whichever value implies a larger feature size should be considered valid. The expectation is that _featureSizeVar_ will be set to zero if the feature size does not scale with depth. As with _featureSize_, _featureSizeVar_ should be ignored if _significantFeatures_ is False.

.. Note that depth range maximum and minimum in S-101 are omitted. The assumption is that if this information is required, then the corresponding grid cells in the elevation layer can be queried for a minimum and maximum depth for each table row.

. Provide necessary uncertainty information as an input into critical underkeel clearance precision navigation systems.

. Prevent the automated selection of soundings from interpolated grid cells, while still providing the continuous data required for depth contour creation. This purpose is accomplished by the _bathyCoverage_ Boolean attribute field. This field enables the flagging of grid cells populated by interpolation (when that interpolation occurs across gaps in bathymetric observations greater than the S-102 grid spatial resolution). This functionality is especially useful in side-scan surveys which are characterized by gaps in bathymetric observations with full coverage side-scan imagery. In this case, interpolated gaps between bathymetry coverage would show _fullSeafloorCoverageAchieved_ = True and _bathyCoverage_ = False. However, if _fullSeafloorCoverageAchieved_ = False, _bathyCoverage_ must also equal False (e.g., gaps between single beam echosounder data without correlating side scan sonar coverage). Thus, this facility will provide navigation software systems with the required information necessary to preferably select soundings from direct bathymetric observations.

Quality and source metadata are encoded as records within a featureAttributeTable dataset, which is itself within the QualityOfBathymetryCoverage container group (<<tab-attributes-of-values-group>>).


== Data Maintenance

=== Maintenance and update frequency
Datasets are maintained by replacement on a dataset basis. That is, the entire data product and the associated metadata are replaced as a unit. This is unlike vector data that may be updated incrementally. Also, each replacement data set must have its own digital signature.

=== Data source
Data producers must use applicable sources to maintain and update data and provide a brief description of the sources that were used to produce the dataset.

=== Production process
Data Producers should follow their established production processes for maintaining and updating datasets.


[[sec-portrayal]]
== Portrayal

=== Introduction
S-102 portrayal is intended to contribute to the safe operation of an S-100 based marine navigation system by:

* Ensuring display of bathymetric surfaces, standards of colours, and their assignment to depths;
* Ensuring the display is clear and unambiguous;
* Establishing an accepted pattern for presentation that becomes familiar to mariners and so can be recognized instantly without confusion; and
* Utilizing the S-100 portrayal model to ensure interoperability.

To ensure that presentation remains intuitive, the following principles must be followed when changes are made to the S-102 Portrayal Catalogue:

* S-102 must maintain equivalence in terms of alerts and indications functionality in ECDIS;
* The S-102 Portrayal Catalogue should be modified by extension. Portrayal rules should be retained for items that have been superseded in the current version of S-102. This retention ensures that S-102 data produced to previous versions can be displayed using the latest Portrayal Catalogue.

S-102 portrayal is covered by the portrayal model as defined in S-100. This model reflects how the Portrayal Catalogue is defined for use in marine navigation systems.

S-102 uses the portrayal processes defined in <<iho-s100,part=9>> and <<iho-s100,part=9a>>. Items included in the S-102 Portrayal Catalogue must be registered in the IHO Geospatial Information (GI) Registry.

=== Portrayal Catalogue
Citation information for the S-102 Portrayal Catalogue is provided in <<tab-s102-portrayal-catalogue-citation-info>> below.

[[tab-s102-portrayal-catalogue-citation-info]]
.S-102 Portrayal Catalogue Citation Information
[cols="a,a,a,a",options="header"]
|===
|No. |ISO class or attribute |Type |Value

|--
|CI_Citation
|Class
|--

|1
|  title
|Character String
|S-102 Portrayal Catalogue

|2
|  date
|CI_Date +
(class)
|--

|2.1
|    date
|DateTime
|2024-06-11T00:00:00

|2.2
|    dateType
|CI_DateTypeCode +
(ISO codelist)
|publication

|3
|  edition
|CharacterString
|3.0.0

|4
|  editionDate
|DateTime
|2024-06-11T00:00:00

|5
|  citedResponsibleParty
|CI_responsibility +
(class)
|--

|5.1
|    role
|CI_RoleCode +
(ISO codelist)
|publisher

|5.2
|    party
|CI_Organisation +
(class)
|--

|5.2.1
|      name
|CharacterString
|International Hydrographic Organization

|6
|  otherCitationDetails
|CharacterString
|Found under: +
GI Registers +
Product Specifications +
Bathymetric Surface

|7
|  onlineResource
|CI_OnlineResource +
(class)
|--

|7.1
|    linkage
|CharacterString +
(URL)
|https://registry.iho.int/

|7.2
|    name
|CharacterString
|S-102 Portrayal Catalogue

|7.3
|    description
|CharacterString
|XML Portrayal Catalogue accompanied by related files for colour profiles, rules, etc.

|===

The S-102 Portrayal Catalogue contains the mechanisms for the system to portray information found in S-102 bathymetric surfaces. The S-102 Portrayal Catalogue contains the following types of mechanisms and structures:

* Set of portrayal rules;
* Set of colour profiles.

The Portrayal Catalogue model is defined in <<iho-s100,part=9,clause=9-13>>. The S-102 Portrayal Catalogue is available in an XML document, which conforms to the S-100 XML Portrayal Catalogue Schema. The structure for the Portrayal Catalogue is described in <<iho-s100,part=9,clause=9-13.2>>.

<<fig-s52-depth-zone-colouring-for-day>> is included to illustrate informative depth zone colouring as adapted from S-52. More comprehensive portrayal details can be found in the S-102 Portrayal Catalogue, which is available in the IHO GI Registry (as detailed in <<tab-s102-portrayal-catalogue-citation-info>>).

[[fig-s52-depth-zone-colouring-for-day]]
.S-52, Edition 6.1(.1) Depth Zone Colouring for Day
image::figure-s52-depth-zone-colouring-for-day.png[Depiction of a seafloor area coloured according to S-52 Ed. 6.1.1 for Day]

==== Use of sun-illumination
S-102 data can be visualized as a sun-illuminated or static (flat) dataset. The depiction of sun-illumination requires the entry of a sun azimuth and corresponding elevation. <<fig-sun-illuminated-and-static-flat-shading>> shows the difference between a sun-illuminated and static (flat) surface.

NOTE: Although sun-illumination provides marked benefit to the user, it is not currently supported by S-100. As such, it is advisable for ECDIS manufacturers to implement the facility of sun-illumination in order to make such a benefit available.


Informative values for sun azimuth angle and elevation have been provided in <<tab-sun-azimuth-and-elevation-values>> below.

[[tab-sun-azimuth-and-elevation-values]]
.Sun Azimuth and Elevation Values
[cols="3"]
|===
.2+^.^h|Attribute 2+^h|Value in Degrees
h|Sun-Illuminated h|Flat Surface

|Sun Azimuth Angle |135 Degrees |0.0 Degrees
|Sun Elevation |45 Degrees |0.0 Degrees
|===


[[fig-sun-illuminated-and-static-flat-shading]]
.Sun-illuminated and Static (Flat) Shading
image::figure-sun-illuminated-and-static-flat-shading.png[Side-by-side depiction of a seafloor area with and without sun-illumination. Both views show varying gray shades as depth varies by a large amount. The left view is labeled _Sun-Illuminated_ and also shows hillshade effects according to all depth variation. The right view is labeled _Flat_ and shows no hillshading.]


[[sec-data-product-format-encoding]]
== Data Product Format (Encoding)

=== Introduction
The S-102 data set must be encoded using the Hierarchical Data Format standard, Version 5 (HDF5).

*Format Name*:: HDF5

*Version*:: 1.8.8

*Character Set*:: UTF-8

*Specification*:: link:++https://www.hdfgroup.org/++[]

The key idea behind the S-102 product structure is that each coverage is a feature. Each of these features is co-located with the others. Therefore, they share the same spatial metadata, and each is required to correctly interpret the others.

For the use of HDF5, the following key concepts (<<iho-s100,part=10c,clause=5.1>>) are important:

_File_:: a contiguous string of bytes in a computer store (memory, disk, etc.), and the bytes represent zero or more objects of the model;

_Group_:: a collection of objects (including groups);

_Dataset_:: a multidimensional array of data elements with attributes and other metadata;

_Dataspace_:: a description of the dimensions of a multidimensional array;

_Datatype_:: a description of a specific class of data element including its storage layout as a pattern of bits; (Enumerations are encoded with unsigned 8-bit or unsigned 16-bit indices, depending on the number of transported values.)

_Attribute_:: a named data value associated with a group, dataset, or named datatype and stored as a scalar;

_Property List_:: a collection of parameters (some permanent and some transient) controlling options in the library.

In addition, datasets may be a compound (a single record consisting of an array of simple value types) and have multiple dimensions.

[[subsec-product-structure]]
=== Product structure
The structure of the data product follows the form given in <<iho-s100,part=10c>> -- HDF5 Data Model and File Format. The general structure, which was designed for several S-100 products is given in <<fig-outline-of-the-generic-data-file-structure>>.

[[fig-outline-of-the-generic-data-file-structure]]
.Outline of the generic data file structure
image::../images/figure-outline-of-the-generic-data-file-structure.png[UML diagram depicting the generic data file structure as described between this figure and the table Overview of S-102 Data Product]

<<fig-outline-of-the-generic-data-file-structure>> shows the four levels defined within the HDF encoding as defined in <<iho-s100,part=10c>>. Below is a further definition of these levels.

*Level 1*:: At the top level lies the Root Group, and it contains the Root Metadata and two subsidiary groups. The Root Metadata applies to all S-100 type products.

*Level 2*:: The next Level contains the Feature Information Group and the Feature Container Group. The Feature Information Group contains the feature *BathymetryCoverage*, the feature attribute codes and the optional feature *QualityOfBathymetryCoverage*. The Feature Container Group contains the Feature Metadata and one or more Feature Instance Groups.

*Level 3*:: This level contains one or more Feature Instance groups. A *BathymetryCoverage* feature instance is a bathymetric gridded data set for a single region and at a single vertical datum. A *QualityOfBathymetryCoverage* feature instance is a corresponding dataset for the same single region and for all applicable vertical datums.

*Level 4*:: This level contains the actual data for each feature. In S-102 *BathymetryCoverage* and *QualityOfBathymetryCoverage* each use the *ValuesGroup* to define the content. The other groups at this level are not used.

In <<tab-overview-of-s102-data-product>> below, levels refer to HDF5 structuring (see <<fig-outline-of-the-generic-data-file-structure>>). Naming in each box below the header line is as follows: Generic name; S-100 or S-102 name, or nothing if none; and (_HDF5 type_) group, attribute or attribute list, or dataset. <<fig-hierarchy-of-s102-data-product>> depicts the same structure using a graphical representation.


[[tab-overview-of-s102-data-product]]
.Overview of S-102 Data Product
[cols="a,a,a,a",options="header"]
|===
|LEVEL 1 CONTENT |LEVEL 2 CONTENT |LEVEL 3 CONTENT |LEVEL 4 CONTENT

|General Metadata +
(metadata) +
_(h5_attribute)_
|
|
|

|Feature Codes +
Group_F +
_(h5_group)_
|Feature Name +
BathymetryCoverage +
_(h5_dataset)_
|
|

|
|QualityOfBathymetryCoverage +
_(h5_dataset)_
|
|

|
|Feature Codes +
featureCode +
_(h5_dataset)_
|
|

|Feature Type +
BathymetryCoverage +
_(h5_group)_
|Type Metadata +
(metadata) +
_(h5_attribute)_
|
|

|
|Feature Instance +
BathymetryCoverage.01 +
... +
BathymetryCoverage.nn +
_(h5_group)_
|Instance Metadata +
(metadata) +
_(h5_attribute)_
|

|
|
|First data group +
Group_001 +
_(h5_group)_
|Group Metadata +
(metadata) +
_(h5_attribute)_

|
|X and Y Axis Names +
axisNames +
_(h5_dataset)_
|
|Bathymetric Data Array values +
_(h5_dataset)_

| Feature Type +
QualityOfBathymetryCoverage +
_(h5_group)_
|Metadata +
_(h5_attribute)_ +
(same as BathymetryCoverage)
|
|

|
|QualityOfBathymetryCoverage.01 +
_(h5_group)_
|Group_001 +
_(h5_group)_
|Group Metadata +
(metadata) +
_(h5_attribute)_

|
|X and Y Axis Names +
axisNames +
_(h5_dataset)_
|
|Quality of Bathymetry Data Array +
values +
_(h5_dataset)_

|
|Feature Attribute Table +
_(h5_dataset)_
|
|

|===

[[fig-hierarchy-of-s102-data-product]]
.Hierarchy of S-102 Data Product
image::../images/figure-hierarchy-of-s102-data-product.png["Diagram depicting hierarchical structure of S-102 Data Product. Let the following block names be represented by letters. A=Group_F ; B=BathymetryCoverage ; C=QualityOfBathymetryCoverage ; D=BathymetryCoverage ; E=QualityOfBathymetryCoverage ; F=featureCode ; G=BathymetryCoverage.01 ; H=... ; I=BathymetryCoverage.nn; J=axisNames ; K=QualityOfBathymetryCoverage.01 ; L=featureAttributeTable ; M=axisNames; N=Group_001 ; O=Group_001 ; P=Group_001; Q=Group_001; R=values ; S=values; T=values; U=values. A, B, and C reside in Level 1. A connects to D, E, and F in Level 2. B connects to G, H, I, and J in Level 2. C connects to K, L, and M in Level 2. G connects to N in Level 3. H connects to O in Level 3. I connects to P in Level 3. K connects to Q in Level 3. N connects to R in Level 4. O connects to S in Level 4. P connects to T in Level 4. Q connects to U in Level 4."]

The following sections explain entries in <<tab-overview-of-s102-data-product>> in greater detail.

==== Root Group

The root group is required by HDF5. The S-100 HDF5 format (<<iho-s100,part=10c>>) attaches metadata attributes applicable to the whole dataset to this group. S-102 uses all the S-100 attributes except _geographicIdentifier_ and _metaFeatures_. The attributes used in S-102 are listed in <<tab-root-group-attributes>>, with specific requirements, if any, added in the Remarks column.

[[tab-root-group-attributes]]
.Root group attributes
[cols="<a,<a,<a,^a,<a,<a", options="header"]
|===

| No
| Name
| Camel Case
| Mult
| Data Type
| Remarks


| 1
| Product specification number and version
| productSpecification
^| 1
<| String
| <<iho-s100,part=10c,table=6>> +
Example: INT.IHO.S-102.3.0.0

| 2
| Time of data product issue
| issueTime
^| 0..1
<| String (Time format)
| <<iho-s100,part=1,table=2>> +
<<iho-s100,part=10c,table=1>>

| 3
| Issue date
| issueDate
^| 1
<| String (Date format)
| <<iho-s100,part=1,table=2>> +
<<iho-s100,part=10c,table=1>>

| 4
| Horizontal CRS
| horizontalCRS
^| 1
<| Integer +
32-bit
| The identifier (EPSG code) of the horizontal CRS as defined in <<horizontal-crs>> (see <<note2>>).

| 5
| Epoch of realization
| epoch
^| 0..1
<| String
|

| 6a
.4+| Bounding box
| westBoundLongitude
^| 1
<| Float +
32-bit
.4+| The values are in decimal degrees. +
If a projected CRS is used for the dataset, these values refer to those of the baseCRS underlying the projected CRS (see <<note3>>).

The root bounding box needs to encompass all data, including fill values. The outermost cell boundaries of the grid cells and the bounding box / domain extent polygon of each feature instance group form the basis for the root bounding box.

| 6b

| eastBoundLongitude
^| 1
<| Float +
32-bit

| 6c

| southBoundLatitude
^| 1
<| Float +
32-bit


| 6d

| northBoundLatitude
^| 1
<| Float +
32-bit


| 7
| Metadata
| metadata
^| 0..1
<| String
| Name of metadata file +
MD_<HDF5 data file base name>.XML (or .xml) ISO metadata +
(per <<iho-s100,part=10c,clause=12>> & <<iho-s100,part=8>>).

| 8
| Vertical coordinate system
| verticalCS
^| 1
<| Integer +
32-bit
| Mandatory in S-102. +
EPSG code; +

The only allowed value is: +
*6498 (Depth--metres--orientation down)

| 9
| Vertical coordinate base
| verticalCoordinateBase
^| 1
<| Enumeration
| Mandatory in S-102. +
The only allowed value is 2: _verticalDatum_ +
(see <<iho-s100,part=10c,table=22>>).

| 10
| Vertical datum reference
| verticalDatumReference
^| 1
<| Enumeration
| Mandatory in S-102. +
The only allowed value is 1: s100VerticalDatum +
(see <<iho-s100,part=10c,table=23>>).

| 11
| Vertical datum
| verticalDatum
^| 1
<| Integer +
unsigned +
16-bit
| Numeric code from IHO GI Registry +
_Vertical Datum_ attribute +
stem:[1-30] & stem:[44]

see <<note12>>
|===

[[note1]]
[NOTE]
====
The _productIdentifier_ ("S-102") and _version_ fields (X.X.X) of S100_ProductSpecification must be used.
====

[[note2]]
[NOTE]
====
The value _horizontalCRS_ specifies the horizontal Coordinate Reference System. At the time of writing, S-100 does not yet provide a mechanism for this value's definition within HDF5 encoding (such as an enumeration of horizontal CRSs). Consequently, this configuration causes a deviation from S-100. The horizontal datum is implicitly defined by this CRS because each horizontal CRS consists of a coordinate system and a datum. S-102 does not use "user defined" CRS as mentioned in <<iho-s100,part=10c,table=6>>.
====


[[note3]]
[NOTE]
====
The baseCRS is the geodetic CRS on which the projected CRS is based. In particular, the datum of the base CRS is also used for the derived CRS (see <<iho-s100,part=6,table=6>>).
====


[[note12]]
[NOTE]
====
This is the default vertical datum. If and only if a *BathymetryCoverage* feature instance group does not specify a vertical datum, this (Root Group) vertical datum shall apply.
====

==== Feature Codes (Group_F)
No attributes.

This group specifies the S-100 features to which the data applies, and consists of three components:

*featureCode* -- a 1-dimensional dataset with the featureCode(s) of the S-100 feature(s) contained in the data product. For S-102, the dataset has only two elements -- the string "*BathymetryCoverage*" and "*QualityOfBathymetryCoverage*" (without quotes). The entries in this dataset give the names of the other two components of Group_F.

*BathymetryCoverage* -- A 1-dimensional dataset that contains the standard definition of the bathymetry coverage feature class in terms of its attributes and their types, units of measure, etc. The datatype of its elements is the compound type described in <<iho-s100,part=10c,table=8>>.

*QualityOfBathymetryCoverage* -- A 1-dimensional dataset of the same datatype as the *BathymetryCoverage* dataset described above. This *QualityOfBathymetryCoverage* dataset contains the definition of the reference to metadata records. The reference is a single integer which identifies a metadata record in _featureAttributeTable_ (described in <<iho-s100,part=10c,clause=9.6.2>> and <<root-QualityOfBathymetryCoverage>>.

//QualityOfBathymetricData is defined in the GI Registry as An area within which a uniform assessment of the quality of the bathymetric data exists. That does not describe this dataset, which provides information at the level of individual cells. Recommend new type QualityOfSurveyCoverage or QualityOfBathymetryCoverage, defined as A set of references to value records that provide localised information about depths, uncertainties, and survey metadata. It can be proposed to the GI Registry after the S-102 team approves it. (RM comment 23Jan2023)

==== BathymetryCoverage and QualityOfBathymetryCoverage Tables (in Group_F)

BathymetryCoverage and QualityOfBathymetryCoverage are arrays of compound type elements, whose components are the 8 components specified in <<tab-sample-contents-of-the-BathymetryCoverage-and-QualityOfBathymetryCoverage-arrays>>.

[[tab-sample-contents-of-the-BathymetryCoverage-and-QualityOfBathymetryCoverage-arrays]]
.Sample contents of the BathymetryCoverage and QualityOfBathymetryCoverage arrays
//It is actually a 1-D array each of whose members is a compound value; Bathy Coverage has 2 elements and Q Of S Coverage 1 (RM comment 4Jan2023)

[cols="a,a,a,a,a",options="header"]
|===

| Name
| Explanation
2+| BathymetryCoverage
| QualityOfBathymetryCoverage

|
|
| S-100 Attribute 1
| S-100 Attribute 2
| S-100 Attribute 1

|code
|Camel Case code of attribute as in Feature Catalogue
|depth
|uncertainty
|iD

|name
|Long name as in Feature Catalogue
|depth
|uncertainty
|ID

|uom.name
|Units (uom.name from S-100 Feature Catalogue)
|metres
|metres
|(empty)

|fillValue
|Fill value (integer or float, string representation, for missing values)
|1000000
|1000000
|0

|datatype
|HDF5 datatype, as returned by H5Tget_class() function
|H5T_FLOAT
|H5T_FLOAT
|H5T_INTEGER

|lower
|Lower bound on value of attribute
|-14
|0
|1

|upper
|Upper bound on value of attribute
|11050
|(empty)
|(empty)

|closure
|Open or Closed data interval. See S100_IntervalType in <<iho-s100,part=1>>.
|closedInterval
|geSemiInterval
|geSemiInterval
|===

[[note11]]
[NOTE]
====
The _uncertainty_ attribute of BathymetryCoverage may be omitted under certain conditions. See <<subsec-BathymetryCoverage-feature-instance-group-values-dataset>>.
====

According to <<iho-s100,part=10c,clause=9.5>>, "All the numeric values in the feature description dataset are string representations of numeric values; for example, "-9999.0" not the float value -9999.0."

While the sample contents are shown in the two attributes columns, these are actually rows in the BathymetryCoverage table. They are also each a single HDF5 compound type and represent a single HDF5 element in the table.

All cells shall be HDF5 variable length strings. The minimum and maximum values are stored in lower and upper columns. Variable length strings allow future proofing the format in the event editing is allowed or correcting these values is required.

==== Root BathymetryCoverage

[[tab-attributes-of-bathymetrycoverage-feature-container-group]]
[cols="<,<,<,^,<,<",options="header"]
.Attributes of *BathymetryCoverage* feature container group
|===
| No
| Name
| Camel Case
| Mult
| Data Type
| Remarks

| 1
| Data organization index
| dataCodingFormat
| 1
| Enumeration
| Value: 2

| 2
| Dimension
| dimension
| 1
| Integer +
unsigned +
8-bit
| Value: 2

| 3
| Common point rule
| commonPointRule
| 1
| Enumeration
| Value: 2 (low) +
see <<iho-s100,part=8,table=11>>.

| 4
| Horizontal position uncertainty
| horizontalPositionUncertainty
| 1
| Float +
32-bit
| Value: -1.0 (if unknown or not available)

| 5
| Vertical position uncertainty
| verticalUncertainty
| 1
| Float +
32-bit
| Value: -1.0 (if unknown or not available)

| 6
| Number of feature instances
| numInstances
| 1
| Integer +
unsigned +
8-bit
| This is the total number of Feature Instance Groups within the Feature Container Group. +
The minimum is 1. +
see <<note13>>

| 7a
.2+| Sequencing rule
| sequencingRule.type
^| 1
| Enumeration
| Value: 1 (linear) +
see <<iho-s100,part=8,table=12>>.

| 7b

| sequencingRule.scanDirection
^| 1
| String
| Value: <axisNames entry> (comma-separated). +
For example, "latitude,longitude". Reverse scan direction along an axis is indicated by prefixing a '-' sign to the axis name. See <<scanDirection>>

| 8
| Interpolation type
| interpolationType
| 1
| Enumeration
| Value: 1 (nearestneighbor). See <<iho-s100,part=8,table=13>>

| 9
| Offset of data point in cell
| dataOffsetCode
| 1
| Enumeration
| Value: 5 barycenter (centroid) of cell. See <<iho-s100,part=10c,table=10>>

|===

[[note13]]
[NOTE]
====
The number depends on the number of different vertical datums in the Feature Container Group.
====

[[subsec-BathymetryCoverage-feature-instance]]
==== Feature Instance group -- BathymetryCoverage.nn
The BathymetryCoverage Feature Container Group can contain one or more Feature Instance Groups. The naming of the Feature Instance Groups follows the notation specified by the S-100. For generalization, the numbering is indicated with ".nn".

Each feature instance group implements a unique vertical datum. All feature instance groups must share the same spatial location and extent. For each feature instance group, only the grid cells falling within the area of validity for that feature instance group's vertical datum should be populated with (real) data. Within that feature instance group, all other grid cells should be populated with the fill value. Therefore, it is expected that:

* The only grid cells that should be populated in more than one feature instance group are those that fall along a vertical datum boundary.

* Where multiple population occurs, the ECDIS should choose the set of values resulting in the most conservative description to the mariner. (I.e., it should choose the shoalest adjusted depth.)

As derived from <<iho-s100,part=10c,clause=9.7>> and <<iho-s100,part=10c,table=12>>, <<tab-structure-of-bathymetrycoverage-feature-instance-group>> and <<tab-attributes-of-bathymetrycoverage-feature-instance-group>> describe the structure and attributes, respectively, of the *BathymetryCoverage* feature instance group.


[[tab-structure-of-bathymetrycoverage-feature-instance-group]]
[cols="<,<,<,^,<,<",options="header"]
.Structure of *BathymetryCoverage* feature instance group
|===
| Group
| HDF5 +
Category
| Name
| Mult
| Data Type
| Remarks / Data Space

.2+| /BathymetryCoverage/ +
  BathymetryCoverage.01
| attributes
| (see Remarks)
| 1
| (see Remarks)
| Single-valued attributes as descripted in <<tab-attributes-of-bathymetrycoverage-feature-instance-group>>


| Dataset
| domainExtent.polygon
| 0..1
| Compound +
(Float, Float)
| Spatial extent of the domain of the coverage +
Array (1-d): i=0, P +
Components: <longitude, latitude> or <X, Y> (coordinates of bounding polygon vertices as a closed ring; that is, the first and last elements will contain the same values) +
Either this or the bounding box attribute must be populated.

.2+| /BathymetryCoverage/ +
  BathymetryCoverage.nn
| attributes
| (see Remarks)
| 1
| (see Remarks)
| Single-valued attributes as descripted in <<tab-attributes-of-bathymetrycoverage-feature-instance-group>>


| Dataset
| domainExtent.polygon
| 0..1
| Compound +
(Float, Float)
| Spatial extent of the domain of the coverage +
Array (1-d): i=0, P +
Components: <longitude, latitude> or <X, Y> (coordinates of bounding polygon vertices as a closed ring; that is, the first and last elements will contain the same values) +
Either this or the bounding box attribute must be populated.
|===

[[tab-attributes-of-bathymetrycoverage-feature-instance-group]]
[cols="<,<,<,^,<,<",options="header"]
.Attributes of *BathymetryCoverage* feature instance group
|===
| No
| Name
| Camel Case
| Mult
| Data Type
| Remarks

| 1a
.4+| Bounding box
| westBoundLongitude
^| 0..1
<| Float +
32-bit
.4+| Coordinates should refer to the previously defined Coordinate Reference System. +
Either this or the domainExtent.polygon dataset must be populated

| 1b
| eastBoundLongitude
^| 0..1
<| Float +
32-bit

| 1c
| southBoundLatitude
^| 0..1
<| Float +
32-bit

| 1d
| northBoundLatitude
^| 0..1
<| Float +
32-bit

| 2
| Number of groups
| numGRP
^| 1
<| Integer +
unsigned +
8-bit
| The number of data values groups contained in this instance group. +
Value: 1

| 3
| Longitude of grid origin
| gridOriginLongitude
^| 1
<| Float +
64-bit
| Longitude or easting of grid origin. +
Unit: (to correspond with previously defined Coordinate Reference System)

| 4
| Latitude of grid origin
| gridOriginLatitude
^| 1
<| Float +
64-bit
| Latitude or northing of grid origin. +
Unit: (to correspond with previously defined Coordinate Reference System)

| 5
| Grid spacing, longitude
| gridSpacingLongitudinal
^| 1
<| Float +
64-bit
| Cell size in x dimension.

| 6
| Grid spacing, latitude
| gridSpacingLatitudinal
^| 1
<| Float +
64-bit
| Cell size in y dimension.

| 7
| Number of points, longitude
| numPointsLongitudinal
^| 1
<| Integer +
unsigned +
32-bit
| Number of points in x dimension.

| 8
| Number of points, latitude
| numPointsLatitudinal
^| 1
<| Integer +
unsigned +
32-bit
| Number of points in y dimension.

| 9
| Start sequence
| startSequence
^| 1
<| String
| Grid coordinates of the grid point to which the first in the sequence of values is to be assigned. +
The choice of a valid point for the start sequence is determined by the sequencing rule. +
Format: n, n +
Example: "0,0" (without quotes)

| 10
| Vertical datum
| verticalDatum
^| 0..1
<| Integer +
unsigned +
16-bit
| see remark <<tab-root-group-attributes>> +
row *vertical datum* +
and <<mvdvdr>> +
Mandatory for feature instance groups with a different vertical datum from that specified in the Root Group +
(prohibited otherwise)


| 11
| Vertical datum reference
| verticalDatumReference
^| 0..1
<| Integer +
unsigned +
8-bit
| The only allowed value is 1: s100VerticalDatum +
(see <<iho-s100,part=10c,table=23>>). +
see <<mvdvdr>> +
Mandatory if this value were to differ from what is contained in the Root Group +
|===

The _gridOriginLongitude_, _gridOriginLatitude_, _gridSpacingLongitudinal_, and _gridSpacingLatitudinal_ attributes should be in the same geographic units as the bounding box. Note that this practice deviates from S-100 where it indicates that this value should be in Arc Degrees.

_numPointsLongitude_ and _numPointsLatitude_ must contain the number of cells in the x and y dimensions of the values table.

The S-102 uses the "Overriding of Attributes" concept of the <<iho-s100,part=10c,clause=9.7.1>>. This usage allows the feature instance group to overwrite the attributes of a higher group, in this case the _verticalDatum_. The default vertical datum is specified in the root group (see <<tab-root-group-attributes>>). The feature instance group for this default vertical datum must not use the additional attributes _verticalDatum_ and _verticalDatumReference_ (on the feature instance group).

[[mvdvdr]]
If multiple vertical datums are present in the product, a separate feature instance group must be created for each vertical datum. These feature instance groups must use the additional attribute _verticalDatum_ (on the feature instance group).

_Note: At present, this Product Specification does not allow values other than *1: s100VerticalDatum* for *verticalDatumReference*. However, if future changes allow the value of *2: EPSG* (and if the value at the feature instance group differs from what is contained in the Root Group), then this value would become mandatory._

[[para-domain-extent-polygon]]
According to S-100, either the BoundingBox at the Feature Instance Group or the _domainExtent.polygon_ must be specified. If _domainExtent.polygon_ is specified, the BoundingBox is not specified in this case. The grid cells that do not belong to the area of the respective vertical datum should be assigned the fill value. If more than one _domainExtent.polygon_ is used, those of different feature instance groups should not overlap. At positions where the polygons of different Feature Instance groups touch, the edges should be identical. The _domainExtent.polygon_ does not have to follow grid cell boundaries but is an independent vector geometry based on the _SoundingDatum_ surface from S-101. The _domainExtent.polygon_ only supports a simple polygon geometry in accordance with <<iho-s100,part=10c,table=11>>. The mapping of multi-polygons and inner rings is not possible.

==== The values group -- Group_001
This group contains 5 attributes, all of which are mandatory. According to <<iho-s100,part=10c,table=19>>, _timePoint_ applies because the _dataCodingFormat_ = _2_.
The other four attributes for this group are an extension of this Product Specification and, thus, are not defined by <<iho-s100,part=10c>>. <<tab-attributes-of-values-group>> lists all 5 attributes.

[[tab-attributes-of-values-group]]
.Attributes of values group
[cols="<,<,<,^,<,<",options="header"]
|===
| No
| Name
| Camel Case
| Mult
| Data Type
| Remarks

| 1
| minimum Depth
| minimumDepth
| 1
| Float +
32-bit
| The minimum depth value in the values dataset(s) of this group

| 2
| maximum Depth
| maximumDepth
| 1
| Float +
32-bit
| The maximum depth value in the values dataset(s) of this group

| 3
| minimum Uncertainty
| minimumUncertainty
| 1
| Float +
32-bit
| The minimum uncertainty value in the values dataset(s) of this group. If no uncertainty values are in the dataset(s) the value must be the fillValue

| 4
| maximum Uncertainty
| maximumUncertainty
| 1
| Float +
32-bit
| The maximum uncertainty value in the values dataset(s) of this group. If no uncertainty values are in the dataset(s) the value must be the fillValue

| 5
| Time stamp
| timePoint
| 1
| String
| Because S-102 specifies survey dates elsewhere in its structure, this value should always be the fill value: +
_00010101T000000Z_

|===

The group contains an HDF5 dataset named values containing the bathymetric gridded data.

[[subsec-BathymetryCoverage-feature-instance-group-values-dataset]]
==== BathymetryCoverage feature instance group -- values dataset

This dataset contains the compound data arrays containing bathymetric gridded data. These components are explained below.

For bathymetric gridded data, the dataset includes a two-dimensional array containing always the depth and under certain conditions uncertainty data. These dimensions are defined by _numPointsLongitudinal_ and _numPointsLatitudinal_. By knowing the grid origin and the grid spacing, the position of every grid point and grid cell can be simply computed.

If the _uncertainty_ for each grid cell is equal, it is not necessary to store it at each cell in the grid. The uniqueness of the uncertainty results from the equality of the attributes _minimumUncertainty_ and _maximumUncertainty_ of Group_001 of the BathymetryCoverage (see <<tab-attributes-of-values-group>> No. 3 & 4). If the uncertainty values at the grid cells are omitted, it must be ensured that the entry of the _uncertainty_ of the BathymetryCoverage in the Group_F is also omitted (see <<tab-sample-contents-of-the-BathymetryCoverage-and-QualityOfBathymetryCoverage-arrays>>). This type of storage technique can reduce the amount of memory required for the uncertainty without loss of information. The uncertainty of each grid cell can be immediately obtained from the _minimumUncertainty_ or _maximumUncertainty_ attributes of Group_001 of the BathymetryCoverage.

If the _uncertainty_ is not the same for each grid cell, it must be stored at each cell in the grid. For unknown or unused uncertainty data, it must be filled with the _fillValue_ specified in the Group_F feature information dataset.

The grid cell values are stored in two-dimensional arrays with a prescribed number of columns (_numCOL_) and rows (_numROW_). This grid is defined as a regular grid (_dataCodingFormat_ = 2); therefore, the _depth_ and _uncertainty_ values will be for each cell in the grid. The data type of the array values is a compound with one or two members.

[[root-QualityOfBathymetryCoverage]]
==== Root QualityOfBathymetryCoverage

The QualityOfBathymetryCoverage container group has the same metadata attributes as BathymetryCoverage container group (see <<tab-attributes-of-bathymetrycoverage-feature-container-group>>). The values of the attributes must also be the same as the BathymetryCoverage container group. An exception is the attribute _dataCodingFormat_, which must be '9'. The use of multiple BathymetryCoverage Feature Instance groups (different Vertical Datums) does not affect the multiplicity of the QualityOfBathymetryCoverage, which remains 0 to 1. This means that the different BathymetryCoverage Feature Instance groups share a common QualityOfBathymetryCoverage.

The QualityOfBathymetryCoverage container group contains an additional 1-dimensional array named featureAttributeTable (<<iho-s100,part=10c,table=9>>; <<iho-s100,part=10c,clause=9.6.2>>). This dataset is mandatory within the QualityOfBathymetryCoverage group. Each element of this array is a metadata record of HDF5 compound type. The fields are described in <<tab-elements-of-featureAttributeTable-compound-datatype>> below.

//(1) Are these fields mandatory? (2) Can producers add other fields like surveyType and line spacing? (RM comment 4Jan2023)
//All optional except id. Producers should not add other fields. (RM comment 23Jan2023)

[[tab-elements-of-featureAttributeTable-compound-datatype]]
.Elements of featureAttributeTable compound datatype
[cols="<,<,<,^,<,<",options="header"]
|===

| No
| Attribute
| Description
| Mult
| Data Type
| Remarks

| 1
| id
| Metadata record identifier
| 1
| Integer +
unsigned +
32-bit
| Each record must have a unique identifier.

| 2
| dataAssessment
| The categorization of the assessment level of bathymetric data for an area.
| 0..1
| Integer +
unsigned +
8-bit
| *1: Assessed +
*2: Unassessed +
*3: Oceanic

| 3
| featuresDetected.leastDepthOfDetectedFeaturesMeasured
| Expression stating if the least depth of detected features in an area was measured.
| 0..1
| Integer +
unsigned +
8-bit
| Boolean, Values: +
*1 (TRUE) +
*0 (FALSE). +
See <<subsec-note4>>.

| 4
| featuresDetected.significantFeaturesDetected
| A statement expressing if significant features have or have not been detected in the course of a survey.
| 0..1
| Integer +
unsigned +
8-bit
| Boolean, Values: +
*1 (TRUE) +
*0 (FALSE). +
See <<subsec-note5>>.

| 5
| featuresDetected.sizeOfFeaturesDetected
| The size of detected bathymetric features in an area.
| 0..1
| Float +
32-bit
| See <<subsec-note6>> and <<subsec-note7>>.

| 6
| featureSizeVar
//editorial note:: PT11: new in the IHO registry
| Percentage of depth that a feature of such size could be detected.
| 0..1
| Float +
32-bit
| Set to zero if the feature size does not scale with depth. +
See <<subsec-note6>> and <<subsec-note7>>.

| 7
| fullSeafloorCoverageAchieved
| Expression stating if full seafloor coverage has been achieved in the area by hydrographic surveys.
| 0..1
| Integer +
unsigned +
8-bit
| Boolean, Values: +
*1 (TRUE) +
*0 (FALSE). +
See <<subsec-note8>>.

| 8
| bathyCoverage
//editorial note:: PT11: new in the IHO registry
| *False* for grid cells populated by interpolation.
| 0..1
| Integer +
unsigned +
8-bit
| Boolean, Values: +
*1 (TRUE) +
*0 (FALSE). +
See <<subsec-note9>>.

| 9
| zoneOfConfidence.horizontalPositionUncertainty.uncertaintyFixed
| The best estimate of the fixed horizontal or vertical accuracy component for positions, depths, heights, vertical distances, and vertical clearances.
| 0..1
| Float +
32-bit
|

| 10
| zoneOfConfidence.horizontalPositionUncertainty.uncertaintyVariableFactor
| The factor to be applied to the variable component of an uncertainty equation so as to provide the best estimate of the variable horizontal or vertical accuracy component for positions, depths, heights, vertical distances, and vertical clearances.
| 0..1
| Float +
32-bit
|

| 11
| surveyDateRange.dateStart
| The start date of the period of the hydrographic survey.
| 0..1
| Date
| ISO 8602:2004 date format. +
Complete or truncated date, +
see <<iho-s100,part=1,table=2>>.

| 12
| surveyDateRange.dateEnd
| The end date of the period of the hydrographic survey.
| 0..1
| Date
| ISO 8602:2004 date format. +
Complete or truncated date, +
see <<iho-s100,part=1,table=2>>.

| 13
| sourceSurveyID
| The survey filename or ID.
| 0..1
| String
|

| 14
| surveyAuthority
| The authority which was responsible for the survey.
| 0..1
| String
|

| 15
| typeOfBathymetricEstimationUncertainty
| The measure used to estimate the magnitude of the difference between true and estimated bathymetric depth, after all appropriate corrections are made.
| 0..1
| Enumeration
| See <<tab-codes-defining-how-bathy-depth-uncertainty-determined>>. +
See <<subsec-note10>>.

|===

[[subsec-note4]]
[NOTE]
====
A feature in this context is any object, whether manmade or not, projecting above the sea floor, which may be a danger for surface navigation <<iho-s44>>. Least depth of detected features measured does not describe the least depth of features that were actually detected during a hydrographic survey, but the ability of the survey to detect the least depth of features with a maximum uncertainty as defined in <<iho-s44>>.
====

[[subsec-note5]]
[NOTE]
====
A feature in this context is any object, whether manmade or not, projecting above the sea floor, which may be a danger for surface navigation <<iho-s44>>. Significant features detected does not describe if significant features were actually detected during a hydrographic survey, but whether the survey had the capacity to detect significant features.
====

[[subsec-note6]]
[NOTE]
====
The role of the attribute, _featureSizeVar_ is described in <<qualityAndSourceMetadata>>. The expectation is that _featureSizeVar_ will be set to zero if the feature size does not scale with depth. As with _featureSize_, _featureSizeVar_ should be ignored if _significantFeatures_ is False.
====

[[subsec-note7]]
[NOTE]
====
When both _featureSize_ and _featureSizeVar_ are present, the greater of the two should be considered valid.
====

[[subsec-note8]]
[NOTE]
====
Full seafloor coverage achieved applies to both the spatial completeness of feature detection and to the spatial completeness of the measurement of the regular seafloor. The former is further specified by the complex attribute features detected; the latter by the attributes depth range maximum value and depth range minimum value.
====

[[subsec-note9]]
[NOTE]
====
The attribute _bathyCoverage_ is especially useful in side-scan surveys which are characterized by gaps in bathymetric observations with full coverage side-scan imagery. In this case, interpolated gaps between bathymetry coverage would show _fullSeafloorCoverageAchieved_ = True and _bathyCoverage_ = False. However, if _fullSeafloorCoverageAchieved_ = False, _bathyCoverage_ must also equal False (e.g., gaps between single beam echosounder data without correlating side-scan sonar coverage).
====

[[subsec-note10]]
[NOTE]
====
Names and listed values which are not currently defined in the IHO GI Registry are subject to change upon acceptance in the Registry.
====

[[tab-codes-defining-how-bathy-depth-uncertainty-determined]]
.Codes defining how uncertainty of bathymetric depth was determined
[cols="<,<,<,<,<",options="header"]
|===

| Role Name
| Name
| Description
| Code
| Remarks

| Enumeration
| S102_BatymetricUncertaintyType
| An estimate of the magnitude of the difference between true and estimated bathymetric depth, after all appropriate corrections are made.
| -
|

| Value
| rawStandardDeviation
| Raw standard deviations of soundings that contributed to the grid cell.
| 1
| -


| Value
| cUBEStandardDeviation
| Standard deviation of soundings captured by a CUBE hypothesis (that is, CUBE's standard output of uncertainty).
| 2
| -


| Value
| productUncertainty
| The greater of (1) standard deviation of the soundings contributing to the depth solution or, (2) the _a priori_ computed uncertainty estimate (that is, modelled Total Vertical Uncertainty).
| 3
| -


| Value
| historicalStandardDeviation
| Estimated standard deviation based on historical/archive data.
| 4
| -


| Value
| (fill value representing "unknown")
| (fill value when the uncertainty is an unknown layer type)
| 0
| This is a "fill value" and will not be in the feature catalogue.

|===

==== Instance group QualityOfBathymetryCoverage.01
The QualityOfBathymetryCoverage.01 instance group has the same metadata attributes as BathymetryCoverage.01 instance group (see <<tab-attributes-of-bathymetrycoverage-feature-instance-group>>). The values of the attributes must also be the same as the BathymetryCoverage instance group.

==== Values group for QualityOfBathymetryCoverage
The values group for QualityOfBathymetryCoverage contains no metadata attributes and a single dataset named values, which is described in <<subsec-values-dataset-for-QualityOfBathymetryCoverage>>.

[[subsec-values-dataset-for-QualityOfBathymetryCoverage]]
==== Values dataset for QualityOfBathymetryCoverage
The values dataset for QualityOfBathymetryCoverage is a single two-dimensional array of unsigned integers (the same datatype and size as the id field in featureAttributeTable<<tab-attributes-of-values-group>>). The array must have the same dimensions as the values dataset in the BathymetryCoverage feature instance (<<subsec-BathymetryCoverage-feature-instance-group-values-dataset>>).

Each cell in this values dataset must be populated with a value that is one of the record identifiers in the featureAttributeTable dataset or with the fill value 0 (zero).

==== Mandatory Naming Conventions

The following group and attribute names are mandatory in S-100:

* Group_F
* featureCode
* (for S-102)
** *BathymetryCoverage*
** axisNames
** *BathymetryCoverage.01*
** *QualityOfBathymetryCoverage.01*
** featureAttributeTable
** Group_nnn


[[sec-data-product-delivery]]
== Data Product Delivery

=== Introduction
This clause describes how S-102 data will be delivered from the charting authority to the mariner.

*Units of Delivery*:: Exchange Set

*Transfer Size*:: See <<subsec-dataset-size>>.

*Medium Name*:: Digital Data Delivery

*Other Delivery Information*::
+
--
Each dataset must be contained in a physically separate, uniquely identified file on the transfer medium.

Each exchange set has a single exchange catalogue which contains the discovery metadata for each dataset.

An exchange set is encapsulated into a form suitable for transmission by a mapping called an encoding. An encoding translates each of the elements of the exchange set into a logical form suitable for writing to media and for transmission online. An encoding may also define other elements in addition to the exchange set contents (This is media identification, data extents etc. ...) and may define commercial constructs such as encryption and compression methods.

If the data is transformed in S-102 it must not be changed.

This Product Specification defines the encoding which must be used as a default for transmission of data between parties.

The encoding encapsulates exchange set elements as follows:

*Mandatory Elements*

* S-102 datasets -- HDF encoding
* Exchange Catalogue -- the XML encoded representation of exchange set catalogue features [discovery metadata].

*Optional Elements*

* S-102 Feature Catalogue -- If it is necessary to deliver the latest Feature Catalogue to the end user it may be done using the S-102 exchange set mechanism for datasets
* S-102 Portrayal Catalogue -- If it is necessary to deliver the latest Portrayal Catalogue to the end user it may be done using the S-102 exchange set mechanism for datasets.
--

=== Dataset

==== Dataset management
Three types of dataset files may be produced and contained within an exchange set:

* New dataset: Initial.
* New edition of a dataset: Includes new information. New editions must cover at least the same area as its predecessor.
* [[canc]]Cancellation: The dataset is cancelled and no longer available to be displayed or used.

[[subsec-production-of-a-cancellation]]
===== Production of a cancellation
S-102 uses only the fileless cancellation method described in <<iho-s100,part=17,clause=17-4.4.1>>. In order to cancel a dataset, the cancelling authority (generally the producer of the original dataset) must:

1. Prepare an exchange catalogue with an S100_DatasetDiscoveryMetadata block with field values as described in <<subsec-metadata-for-cancellation>>.
2. Complete other parts of the exchange catalogue as required by <<subsec-s100_exchangecatalogue>> (for example, provide discovery metadata for a replacement dataset if such is included in the same exchange set).
3. Sign and distribute the exchange catalogue in a normally structured exchange set.

[[subsec-metadata-for-cancellation]]
===== Metadata for cancellation
S-102 uses only the fileless cancellation method described in <<iho-s100,part=17,clause=17-4.4.1>>. For a cancellation, set:

* _fileName_ = _fileName_ of the cancelled dataset

* _purpose_ = _cancellation_

* issueDate and issueTime = the issue date and time of the cancellation

* _replacedData_ = _true_ if and only if the cancelled dataset is replaced by another dataset; otherwise _false_. This attribute must be populated for a cancellation.

* _dataReplacement_ = _fileName_ of the replacement dataset (if and only if the cancelled dataset is replaced by another dataset). This attribute must be populated when _replacedData_=_true_.

* all other mandatory attributes to the same values as in the discovery metadata block for the dataset being cancelled.

[[subsec-dataset-size]]
==== Dataset size
S-102 delivery will take place in one form: network transfer to platform (that is, internet download). An example scenario has been provided below:

NOTE: The use of 10 MB in this and other sections should be treated as informative information only. Additionally, any computed values associated with either file size limit should be treated as approximate answers. Final selection of an appropriate file size limit or grid resolution is left to the discretion of the data producer.

*Network Transfer*:: To minimize overall file size, the HO produces a 10 MB file for wireless transmission to marine vessels. In uncompressed form, this file would contain roughly 600 by 600 grid cells.

<<tab-informative-grid-resolution-and-resulting-tile-size-at-chart-scale>> provides general information to aid in the compilation of S-102 data for specific charting scales.



===== S-102 grid resolution and tiling

[[tab-informative-grid-resolution-and-resulting-tile-size-at-chart-scale]]
.Informative Grid Resolution and Resulting Tile Size at Chart Scale
[cols="<a,<a,<a",options="header"]
|===
|Scale |Informative Grid Resolution |Resulting Tile Size @ 10 MB

|NULL (only allowed on minimum display scale where the maximum display scale = 10,000,000)
|
|Approximate Linear Distance in Nautical Miles (M) for a 600 X 600 cell grid

|1:10,000,000
|900 metres
|291 X 291

|1:3,500,000
|900 metres
|291 X 291

|1:1,500,000
|450 metres
|145 X 145

|1:700,000
|210 metres
|68 X 68

|1:350,000
|105 metres
|34 X 34

|1:180,000
|54 metres
|17.5 X 17.5

|1:90,000
|27 metres
|8.7 X 8.7

|1:45,000
|13 metres
|4.2 X 4.2

|1:22,000
|6 metres
|1.9 X 1.9

|1:12,000
|3 metres
|1.0 X 1.0

|1:8,000
|2 metres
|0.6 X 0.6

|1:4,000
|1 metres
|0.3 X 0.3

|1:3,000
|1 metres
|0.3 X 0.3

|1:2,000
|1 metres
|0.3 X 0.3

|1:1,000
|1 metres
|0.3 X 0.3
|===

[[subsec-dataset-file-naming]]
==== Dataset file naming
Dataset naming must follow a standard pattern to give implementers greater predictability of incoming datasets (see <<iho-s100,part=17,clause=4.3>>). S-102 dataset naming conventions must follow these rules.

*102YYYY.H5*::
102::: the first 3 characters identify the dataset as an S-102 dataset (mandatory).
YYYY::: the fourth to seventh characters identify the producer code according to the Producer Code Register.
::: the eighth to the maximum nineteenth characters are optional and may be used in any way by the producer to provide the unique file name. The following characters are allowed in the dataset name: A to Z, 0 to 9 and the special character _ (underscore).
H5::: denotes an HDF5 file.

=== Exchange Set
The structure of an S-102 Exchange Set must be according to the structure described below, which is based on <<iho-s100,part=17,clause=4.2>>.

. An S-102 Exchange Set must contain an Exchange Set Catalogue, CATALOG.XML, its digital signature CATALOG.SIGN, and may contain any number of S-102 conformant dataset files, support files, and Catalogue files.

. All content must be placed inside a top root folder named S100_ROOT. This is the only top level root folder in an Exchange Set containing only S-100 products.

. The S100_ROOT folder must contain a subfolder named S-102. This subfolder holds content specific to the S-102 Product Specification.

. The S-102 subfolder must contain subfolders for the component dataset files (DATASET_FILES) and Catalogues (CATALOGUES) as required.

. The required Exchange Set Catalogue XML document instance must be named CATALOG.XML and placed in the S100_ROOT folder, together with its digital signature (CATALOG.SIGN) file. All other digital signatures are included within their corresponding resource metadata records in the CATALOG.XML.

. Support files are not allowed in S-102 exchange sets for this edition of S-102.

=== Exchange Catalogue
The Exchange Catalogue acts as the table of contents for the Exchange Set. The Catalogue file of the Exchange Set must be named CATALOG.XML. No other file in the Exchange Set may be named CATALOG.XML. The contents of the Exchange Catalogue are described in <<sec-metadata>>.

=== Data integrity and encryption
<<iho-s100,part=15>> defines the algorithms for compressing, encrypting and digitally signing datasets based on the S-100 Data Model. The individual Product Specifications provide details about which of the elements are being used and on which files in the dataset.

==== Use of compression
The data producer decides if compression will be used on the S-102 product files (HDF5). It is expected that a hydrographic office will make a policy decision and that all the S-102 datasets from the producer will be either compressed or uncompressed.

It is recommended to compress all the dataset files, for example HDF5 files. The ZIP compression method defined in <<iho-s100,part=15,clause=5.2>> must be applied to the product files.

==== Use of data protection
It is recommended to encrypt all the dataset files, for example HDF5. The encryption method defined in <<iho-s100,part=15>> must be applied.

==== Use of digital signatures
Digital signatures shall be used on all files included in a S-102 compliant Exchange Set to meet the requirements of IMO resolution MSC.428(98) to reduce cyber security risks among users, especially when used in navigations systems at sea. The recommended signature method is defined in <<iho-s100,part=15>>.

The digital signature information is encoded in the corresponding discovery block in the exchange catalogue for each file included in the Exchange Set.


[[sec-metadata]]
== Metadata

//Since S-102 now describes a navigation product intended for ECDIS use: (a) ISO metadata files are not needed - ECDIS doesnt have to read them; and (b) any extra metadata (metadata not defined in Part 17) should, at least in this edition, *not* be added to the exchange catalogue. If such extra metadata *has* to be provided, it should be as HDF5 attributes in the root group. (RM Comment 23Jan2023)

//With the removal of ISO metadata files, the metadata attributes in the old Sections 12.2 (Discovery metadata) and 12.3 (Structure metadata) are not encoded anywhere and these clauses have been deleted. The attributes depthCorrectionType and verticalUncertaintyType are also not encoded anywhere in the navigation version of S-102. (RM Comment 20 Mar 2023)

=== Introduction
The Metadata elements used in the Bathymetric Surface product are derived from S-100 and from <<iso-19115-1>> and <<iso-19115-2>>. Optionally additional metadata may be derived from <<iso-ts-19130>> and <<iso-ts-19130-2>> especially metadata relating to the sonar equipment which may have been used to acquire the bathymetric data.

S-102 metadata is encoded in two places:

* Metadata used for the discovery, identification, and use of S-102 datasets in S-100-based navigations systems (specifically, an S-100-capable ECDIS) is encoded in the exchange catalogue. This metadata conforms to S-100 Part 17, with product-specific restrictions added.

* Metadata required by the S-100 HDF5 encoding (<<iho-s100,part=10c>>) and product-specific metadata defined by this product specification are encoded at various levels in the HDF5 group hierarchy, as specified by <<iho-s100,part=10c>> or <<subsec-product-structure>>.

[[subsec-exchange-set-metadata]]
=== Exchange Set metadata
For information exchange, there are several categories of metadata required: metadata about the overall Exchange Catalogue, metadata about each of the datasets contained in the Catalogue.

<<fig-components-and-associated-metadata-for-the-s102-exchange-set>> depicts the relationships of exchange set elements (datasets and feature/portrayal catalogues) and exchange set metadata. This figure is derived from <<iho-s100,part=17,figure=2>> with relationships not applicable to S-102 omitted.

<<fig-relationship-between-exchange-catalogue-discovery-metadata-and-dataset>> depicts the structure of the exchange catalogue and its component discovery metadata blocks. The structure is the same as in <<iho-s100,part=17>>.

More detailed information about the various classes is shown in <<fig-s102-exchange-set-class-details>> with further description in <<tab-s100-datasetDiscoveryMetadata-params;to!sec-pt-locale>>. In the cases in which classes are used without modification, refer to <<iho-s100,part=17>> for their descriptions.

The discovery metadata classes have numerous attributes which enable important information about the datasets to be examined without the need to process the data (e.g., decryption, decompression, loading). Other Catalogues can be included in the Exchange Set in support of the datasets such as Feature and Portrayal.

[[fig-components-and-associated-metadata-for-the-s102-exchange-set]]
.Components and associated metadata for the S-102 exchange set (<<iho-s100,part=17,figure=2>> with items not used by S-102 omitted)
image::../images/figure-components-and-associated-metadata-for-the-s102-exchange-set.png[]

[[fig-relationship-between-exchange-catalogue-discovery-metadata-and-dataset]]
.Relationship between exchange catalogue, discovery metadata, and dataset (<<iho-s100,part=17,figure=6>> with items not used by S-102 omitted)
image::../images/figure-relationship-between-exchange-catalogue-discovery-metadata-and-dataset.png[]

[%landscape]
<<<

[[fig-s102-exchange-set-class-details]]
.S-102 Exchange Set Class Details (<<iho-s100,part=17,figure=7>> with items not used by S-102 omitted)
image::../images/figure-s102-exchange-set-class-details.png[]

[%portrait]
<<<

The following clauses define the mandatory and optional metadata needed for S-102. In some cases, the metadata may be repeated in a national language. If this is the case it is noted in the Remarks column.

The XML schemas for S-102 exchange catalogues will be available from the IHO Geospatial Information (GI) Registry and/or the S-100 GitHub site (link:++https://github.com/IHO-S100WG++[]).

The S-102 exchange catalogue uses the S-100 exchange catalogue schemas which are available from the S-100 schema server at link:++https://schemas.s100dev.net++[] (downloadable archives are also available on the site for offline use). Implementation of the S-102-specific constraints described in following clauses below is left to developer decision as it can be done in various ways depending on implementation frameworks and the requirements of production or application software.

=== Language

The exchange language must be English.

Character strings must be encoded using the character set defined in <<iso-10646-1>>, in Unicode Transformation Format-8 (UTF-8). A BOM (byte order mark) must not be used.


[%landscape]
<<<

[[subsec-s100_exchangecatalogue]]
=== S100_ExchangeCatalogue

Each Exchange Set has a single S100_ExchangeCatalogue which contains meta information for the data in the Exchange Set.

S-102 uses S100_ExchangeCatalogue without modification.


==== S100_ExchangeCatalogueIdentifier
S-102 uses S100_ExchangeCatalogueIdentifier without modification.

==== S100_CataloguePointOfContact
S-102 uses S100_CataloguePointOfContact without modification.

=== S100_DatasetDiscoveryMetadata
Dataset discovery metadata in S-102 restricts certain attributes and roles as described in <<tab-s100-datasetDiscoveryMetadata-params>>. Optional S-100 attributes which are mandatory in S-102 are indicated in the Remarks column.

[[tab-s100-datasetDiscoveryMetadata-params]]
.S100_DatasetDiscoveryMetadata parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_DatasetDiscoveryMetadata
|Metadata about the individual datasets in the Exchange Catalogue
|-
|-
|*The optional S-100 attributes _updateNumber_, _updateApplicationDate_, _referenceID_, and _temporalExtent_ are not used in S-102.* +
*References to support file discovery metadata are not permitted because S-102 does not use support files.*

|Attribute
|fileName
|Dataset file name
|1
|URI
|See <<iho-s100,part=1,clause=4.6>> +
*Format: file:/S-102/DATASET_FILES/<dsname>* +
*Dataset file name <dsname> must be according to format defined in <<subsec-dataset-file-naming>>.*

|Attribute
|description
|Short description giving the area or location covered by the dataset
|0..1
|CharacterString
|For example a harbour or port name, between two named locations, etc.

|Attribute
|datasetID
|Dataset ID expressed as a Maritime Resource Name
|0..1
|URN
|The URN must be an MRN. +
*See <<iho-s100,part=3,clause=10>>*

|Attribute
|compressionFlag
|Indicates if the resource is compressed
|1
|Boolean
|_True_ indicates a compressed dataset resource. +
_False_ indicates an uncompressed dataset resource.

|Attribute
|dataProtection
|Indicates if the data is encrypted
|1
|Boolean
|_True_ indicates an encrypted dataset resource. +
_False_ indicates an unencrypted dataset resource.

|Attribute
|protectionScheme
|Specification of method used for data protection
|0..1
|S100_ProtectionScheme
|*Populate if and only if _dataProtection_ = _True_.*

|Attribute
|digitalSignatureReference
|Specifies the algorithm used to compute _digitalSignatureValue_
|1
|S100_SE_DigitalSignatureReference
|*See <<iho-s100,part=15,clause8.11.7>> & <<sec-certs-digsign>>*

|Attribute
|digitalSignatureValue
|Value derived from the digital signature
|1..*
|S100_SE_DigitalSignature
|*see <<iho-s100,part=15,clause=15-8.11.3>>* +
The value resulting from application of _digitalSignatureReference_ +
Implemented as the digital signature format specified in <<iho-s100,part=15>>

|Attribute
|copyright
|Indicates if the dataset is copyrighted
|1
|Boolean
|_True_ indicates the resource is copyrighted. +
_False_ indicates the resource is not copyrighted.

|Attribute
|classification
|Indicates the security classification of the dataset
|1
|Class +
MD_SecurityConstraints>MD_ClassificationCode (codelist)
|*Mandatory in S-102* +
[loweralpha]
. unclassified
. restricted
. confidential
. secret
. top secret
. sensitive but unclassified
. for official use only
. protected
. limited distribution

|Attribute
|purpose
|The purpose for which the dataset has been issued
|*1*
|S100_Purpose
|*Mandatory in S-102*

|Attribute
|notForNavigation
|Indicates the dataset is not intended to be used for navigation
|1
|Boolean
|_True_ indicates the dataset *is not* intended to be used for navigation. +
_False_ indicates the dataset *is* intended to be used for navigation.

|Attribute
|specificUsage
|The use for which the dataset is intended
|0..1
|MD_USAGE>specificUsage (character string)
|-

|Attribute
|editionNumber
|The edition number of the dataset
|*1*
//Superfluous for product without updates and reissues; S-102 will always replace the full product file; change to 0 as possible accourding to S100 (RohdeBSH 07. June 2024)
|Integer
|When a data set is initially created, the Edition number 1 is assigned to it. The Edition number is increased by 1 at each new Edition. Edition number remains the same for a re-issue. +
*Mandatory in S-102*

|Attribute
|issueDate
|Date on which the data was made available by the Data Producer
|1
|Date
|-

|Attribute
|issueTime
|Time of day at which the data was made available by the Data Producer
|0..1
|Time
|The S-100 datatype Time +
*May be required if multiple instances of a product are issued on the same day.*

|Attribute
|boundingBox
|The extent of the dataset limits
|*1*
|EX_GeographicBoundingBox
|*Mandatory in S-102* +
*Defined as a rectangle coincident with the outermost cell boundaries of the dataset.*

|Attribute
|productSpecification
|The Product Specification used to create this dataset
|1
|S100_ProductSpecification
|*<<tab-s100-productSpecification-params>>*

|Attribute
|producingAgency
|Agency responsible for producing the data
|1
|CI_Responsibility>CI_Organisation
|See <<iho-s100,part=17,table=17-3>>

|Attribute
|producerCode
|The official IHO Producer Code from S-62
|1
|CharacterString
|*Mandatory in S-102*

|Attribute
|encodingFormat
|The encoding format of the dataset
|1
|S100_EncodingFormat
|*The only allowed value is HDF5* +
*<<tab-s100-encodingFormat-params>>*

|Attribute
|dataCoverage
|Provides information about data coverages within the dataset
|*1*..*
|S100_DataCoverage
|*Mandatory in S-102* +
*<<tab-s100-dataCoverage-params>>*

|Attribute
|comment
|Any additional information
|0..1
|CharacterString
|-

|Attribute
|defaultLocale
|Default language and character set used in the dataset
|0..1
|PT_Locale
|In absence of defaultLocale, the language is English, and the character set is UTF-8.

|Attribute
|otherLocale
|Other languages and character sets used in the dataset
|0..*
|PT_Locale
|

|Attribute
|metadataPointOfContact
|Point of contact for metadata
|0..1
|CI_Responsibility>CI_Individual +
or +
CI_Responsibility>CI_Organisation
|Only if metadataPointOfContact differs from producingAgency

|Attribute
|metadataDateStamp
|Date stamp for metadata
|0..1
|Date
|May or may not be the issue date


|Attribute
|replacedData
|Indicates if a cancelled dataset is replaced by another data file(s)
|0..1
|Boolean
|See note following <<iho-s100,part=17,table=S100_DatasetDiscoveryMetadata>> +
*Mandatory when purpose = cancellation*

|Attribute
|dataReplacement
|Dataset name
|0..*
|CharacterString
|A dataset may be replaced by 1 or more datasets. +
*Dataset name must be according to format defined in <<subsec-dataset-file-naming>>.* +
*For example, _102DE00KD54.H5_* +
See note following <<iho-s100,part=17,table=S100_DatasetDiscoveryMetadata>> +
*Mandatory when replacedData = true*

|Attribute
|navigationPurpose
|Classification of intended navigation purpose (for Catalogue indexing purposes)
|*1*..3
|S100_NavigationPurpose
|If Product Specification is intended for creation of navigational products, this attribute should be mandatory. +
*Mandatory in S-102*

|Role
|resourceMaintenance
|Information about the frequency of resource updates, and the scope of those updates
|0..1
|MD_MaintenanceInformation
|S-100 restricts the multiplicity to 0..1 and adds specific restrictions on the ISO 19115 structure and content. See <<iho-s100,part=17>>. +
Format: PnYnMnDTnHnMnS (XML built-in type for ISO 8601 duration). See <<iho-s100,part=17,clause=4.9>>. +
*S-102 discovery metadata blocks should populate maintenance information if and only if the date of the next edition is definite, whether it is due on a regular or irregular schedule.*

|===

==== S100_NavigationPurpose
S-102 uses S100_NavigationPurpose without modification.

==== S100_DataCoverage
S-102 uses S100_DataCoverage without modification, but with additional remarks and changes to the multiplicity.

[[tab-s100-dataCoverage-params]]
.S100_DataCoverage parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_DataCoverage
|A spatial extent where data is provided along with the display scale information for the provided data
|-
|-
|This field is used by user systems as part of the data loading and unloading algorithms, and it is strongly encouraged that Product Specifications mandate the use of one or more of the displayScale provided as part of S100_DataCoverage.

|Attribute
|boundingPolygon
|A polygon which defines the actual data limit
|1
|EX_BoundingPolygon
|<<note-s100datacoverage-boundingPolygon>>

|Attribute
|temporalExtent
|Specification of the temporal extent of the coverage
|*0*
|S100_TemporalExtent
|*The _temporalExtent_ is not used in S-102.*

|Attribute
|optimumDisplayScale
|The scale at which the data is optimally displayed
|0..1
|Integer
|Example: A scale of 1:25000 is encoded as 25000

|Attribute
|maximumDisplayScale
|The maximum scale at which the data is displayed
|0..1
|Integer
|

|Attribute
|minimumDisplayScale
|The minimum scale at which the data is displayed
|0..1
|Integer
|

|Attribute
|approximateGridResolution
|The resolution of gridded or georeferenced data (in metres)
|*1..2*
|Real
|*Mandatory in S-102* +
A single value may be provided when all axes have a common resolution. +
For multiple value provision, use axis order as specified in dataset. +
For example, for 5 metre resolution, the value 5 must be encoded. +
If the grid cell size varies over the extent of the grid +
(i.e., when using a geographic grid), an approximated value should be used.
|===
[[note-s100datacoverage-boundingPolygon]]
[NOTE]
====
_boundingPolygon_ is restricted to a single GML Polygon with one exterior and 0 or more interiors expressed as Linear Rings using SRS EPSG:4326. The exterior and optional interiors shall be composed of a closed sequence of >=4 coordinate positions expressed individually or as a list (posList). The GML polygon shall have a valid GML identifier.
====

==== S100_Purpose
S-102 uses S100_Purpose without modification, but with a restriction on the allowed values.

[[tab-s100-purpose]]
.S100_Purpose
[cols="a,a,a,^a,a,options="header"]
|===
|Role name |Name |Description |Code |Remarks

|Enumeration
|S100_Purpose
|The purpose of the dataset
|-
|*The S-100 values _update_, _reissue_, and _delta_ are not used in S-102.*

|Value
|newDataset
|Brand new dataset
|1
|No data has previously been produced for this area.

|Value
|newEdition
|New edition of the dataset or Catalogue
|2
|Includes new information which has not been previously distributed by updates.

|Value
|cancellation
|Dataset or Catalogue that has been cancelled
|5
|Indicates the dataset or Catalogue should no longer be used and can be deleted.
|===

==== S100_EncodingFormat
S-102 uses S100_EncodingFormat with a restriction on the allowed values to permit only the S-100 HDF5 format for S-102 datasets.

[[tab-s100-encodingFormat-params]]
.S100_EncodingFormat parameters
[cols="a,a,a,^a,a",options="header"]
|===
|Role name |Name |Description |Code |Remarks

|Enumeration
|S100_EncodingFormat
|The encoding format
|-
|*The only value allowed in S-102 is "`HDF5`".*

|Value
|HDF5
|The HDF5 data format as defined in <<iho-s100,part=10c>>
|3
|-
|===

==== S100_ProductSpecification
S-102 uses S100_ProductSpecification without modification, but with additional remarks and changes to the multiplicity.

[[tab-s100-productSpecification-params]]
.S100_ProductSpecification parameters
[cols="a,a,a,^a,a,a",options="header"]
|===
|Role name |Name |Description |Mult |Type |Remarks

|Class
|S100_ProductSpecification
|The Product Specification contains the information needed to build the specified product.
|-
|-
|-

|Attribute
|name
|The name of the Product Specification used to create the datasets
|*1*
|CharacterString
|The name in the GI Registry should be used for this field. +
*For S-102, this name is "Bathymetric Surface" (as of 25 June 2024).*

|Attribute
|version
|The version number of the Product Specification
|*1*
|CharacterString
|TR 2/2007 specifies versioning of Product Specifications +
*Example: 3.0.0 for S-102 Edition 3.0.0*

|Attribute
|date
|The version date of the Product Specification
|*1*
|Date
|-

|Attribute
|productIdentifier
|Machine readable unique identifier of a product type
|1
|CharacterString +
(Restricted to Product ID values from the IHO Product Specification Register in the IHO Geospatial Information (GI) Registry)
|*For S-102, this identifier is "S-102" (without quotes).*

|Attribute
|number
|The number used to lookup the product in the Product Specification Register of the IHO GI registry
|1
|Integer
|For IHO Product Specifications, these numbers should be taken from the IHO Product Specification Register in the IHO GI Registry. +
*The corresponding Idx-number of the IHO Registry for S-102 Ed. 3.0.0 is 215.*

|Attribute
|compliancyCategory
|The level of compliance of the Product Specification to S-100
|0..1
|S100_CompliancyCategory
|See <<iho-s100,part=4a,clause=4a-5.5>> *and <<subsec-s100-compliancy-category>> below.*
|===

[[subsec-s100-compliancy-category]]
==== S100_CompliancyCategory
S-102 exchange sets conforming to this edition of S-102 and using a CRS from the EPSG registry may be encoded as category 3 or 4 when the _compliancyCategory_ metadata attribute is populated. Because S-98 interoperability assumes _category4_ datasets, _category4_ may be used for test purposes, though the absence of test datasets and of a published IHO interoperability catalogue mean this edition of S-102 does not yet qualify for _category4_. *Given the uncertainty about interoperability testing requirements and availability of test datasets, the S-100 WG chair and S-102 PT chair should be consulted for up-to-date guidance.*

[[tab-s100-compliancyCategory]]
.S100_CompliancyCategory
[cols="a,a,a,^a,a",options="header"]
|===
|Role Name |Name |Description |Code |Remarks


|Enumeration
|S100_CompliancyCategory
|-
|-
|*S-102 should use _category3_ or _category4_, subject to the guidance provided in <<subsec-s100-compliancy-category>>.*

|Value
|category3
|IHO S-100 compliant with standard encoding
|3
|*Qualifies as _category2_; plus "The Product Specification uses only an encoding method defined in <<iho-s100,part=10;and!part=4a,clause=5.5.3>>"*

|Value
|category4
|IHO S-100 and IMO harmonized display compliant
|4
|*Qualifies as _category3_; plus additional requirements, including a portrayal catalogue, cybersecurity (digital signatures and encryption), test material, use of a CRS from the EPSG Registry, and compliance with the IHO S-98 interoperability catalogue. <<iho-s100,part=4a,clause=5.5.4>>*

|===

==== S100_ProtectionScheme
S-102 uses S100_ProtectionScheme without modification.


=== MD_MaintenanceInformation
S-102 uses MD_MaintenanceInformation without modification.


=== MD_MaintenanceFrequencyCode
S-102 uses MD_MaintenanceFrequencyCode without modification.


=== S100_CatalogueDiscoveryMetadata
S-102 uses S100_CatalogueDiscoveryMetadata without modification.


==== S100_CatalogueScope
S-102 uses S100_CatalogueScope without modification.


[[sec-pt-locale]]
==== PT_Locale
S-102 uses PT_Locale without modification.
The class PT_Locale is defined in <<iso-19115-1>>. LanguageCode, CountryCode, and MD_CharacterSetCode are ISO codelists which are defined in a codelists file which is part of the S-100 Edition 5.2.0 schema distribution.

[[sec-certs-digsign]]
=== Certificates and Digital Signatures
The classes S100_SE_CertificateContainerType (<<iho-s100,part=15,clause=8.11.1>>), S100_SE_DigitalSignatureReference (<<iho-s100,part=15,clause=8.11.7>>), and S100_SE_DigitalSignature are defined in <<iho-s100,part=15>> and implemented in the S-100 generic schemas.

In accordance with <<iho-s100,part=15>>, only the ECDSA algorithm is allowed from the S100_SE_DigitalSignatureReference enumeration.

S-102 uses S100_SE_DigitalSignature without modification. As stated in <<iho-s100,part=15,clause=15-8.11.3>>:

"The class S100_SE_DigitalSignature is realized as one of either S100_SE_SignatureOnData (a digital signature of a particular identified resource) or an additional digital signature defined using the class S100_SE_AdditionalSignature, each of which is either a S100_SE_SignatureOnData or S100_SE_SignatureOnSignature element as described in <<iho-s100,part=15,clause=8.8>>. <<iho-s100,part=17>> metadata thus allows for multiple digital signatures, a single mandatory S100_SE_SignatureOnData and any number of additional signatures, either of the data or other signatures."



[%portrait]
<<<

[[annex-data-classification-and-encoding-guide]]
:appendix-caption: Annex
[appendix]
== Data Classification and Encoding Guide

=== Features

==== BathymetryCoverage

.BathymetryCoverage feature parameters
[cols="a,a,a,a"]
|===

4+|*Term*: Bathymetry Coverage

4+|*IHO Definition*: A set of value items required to define a dataset representing a depth calculation and its associated uncertainty.

4+|*Primitive*: S100_IF_GridCoverage


h|Attribute h|Allowable Encoding Value h|Type h|Multiplicity

|depth
|Must be in decimal metres with resolution not to exceed 0.01 metres
|real (32-bit Float)
|1

|uncertainty
|Must be in decimal metres with resolution not to exceed 0.01 metres
|real (32-bit Float)
|0..1
|===

==== QualityOfBathymetryCoverage

.QualityOfBathymetryCoverage feature parameters
[cols="a,a,a,a"]
|===

4+|*Term*: Quality Of Bathymetry Coverage.

4+|*IHO Definition*: A set of references to value records that provide localised information about depth, uncertainties, and bathymetry coverage metadata.

4+|*Primitive*: S100_IF_GridCoverage

h|Attribute h|Constraint h|Type h|Multiplicity

|iD
|Each record must have a unique identifier.
|unsigned 32-bit Integer
|1
|===

=== Feature Attributes

==== BathymetryCoverage

.BathymetryCoverage feature attribute parameters
[cols="a"]
|===

|IHO Definition: *depth*. The vertical distance from a given water level to the bottom [<<iho-s32>>].

|Unit: metres

|Resolution: 0.01

|Remarks:

* Drying heights (drying depths) are indicated by a negative value.

|IHO Definition: *uncertainty*. Estimate characterising the range of values within which the true value of a measurement is expected to lie as defined within a particular confidence level. It is expressed as a positive value.

|Unit: metres

|Resolution: 0.01

|Remarks:

* Represents a +/- value defining the possible range of associated depth.
* Expressed as a positive number.

|===

==== QualityOfBathymetryCoverage

.QualityOfBathymetryCoverage feature attribute parameters
[cols="a"]
|===
|IHO Definition: *iD*. Meta data record identifier for QualityOfBathymetryCoverage
|Unit:
|Resolution:
|Remarks:
|===